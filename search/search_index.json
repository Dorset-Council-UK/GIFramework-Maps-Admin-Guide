{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to the GIFramework Maps Admin Guide","text":"<p>This guide will help you administer a standard installation of GIFramework Maps, either via the management interface (recommended) or via the database backend.</p> <p>Warning</p> <p>We highly reccommend you use the management interface. Incorrect editing of the database directly can result in a broken application.</p> <ul> <li>Adminstration via the management interface</li> <li>Administration via the backend database (advanced)</li> </ul>"},{"location":"db/admin-roles/","title":"Administrative roles","text":"<p>In order to use the management interface, users need to be assigned the appropriate roles.</p> <p>Info</p> <p>This section assumes you are using Microsoft Azure AD B2C authentication, the only currently supported authentication scheme in GIFramework Maps. If you are not using authentication, this section is not relevant.</p>"},{"location":"db/admin-roles/#relevant-tables","title":"Relevant tables","text":"Table Name Description ApplicationRoles Contains all the available Roles users can have. This should not be edited as it is tied directly to the application code ApplicationUserRoles Mapping between user identifiers and the roles they have"},{"location":"db/admin-roles/#applicationroles","title":"ApplicationRoles","text":"<p>This table contains the role names available in the application. Currently there is only one role, <code>GIFWAdmin</code>. This role gives access to all the administrative functions of the application, so should only be given to highly trusted users. </p> <p>Warning</p> <p>The data in this table is relied on by the application directly, so should not be edited</p>"},{"location":"db/admin-roles/#applicationuserroles","title":"ApplicationUserRoles","text":"<p>This table contains the mapping between a user and the roles they have been given. To give a user a role, simply provide their user identifier and the <code>Id</code> from the <code>ApplicationRoles</code> table.</p> <p>Hint</p> <p>You can get a user's identifier (or your own) by getting them to go to <code>https://&lt;your-application-root&gt;/account/diagnostics</code> and looking up the <code>nameidentifier</code> value.</p>"},{"location":"db/analytics-definitions/","title":"Analytics definitions","text":"<p>The <code>AnalyticsDefinitions</code> table contains details about supported analytics tools for adding analytics functionality to the site. The <code>VersionAnalytic</code> table specifies which versions to apply the analytics to (default is to be applied to all versions).</p>"},{"location":"db/analytics-definitions/#relevant-tables","title":"Relevant tables","text":"Table Name Description AnalyticsDefinitions Contains the pre-defined analytics providers VersionAnalytic Contains specified versions for using analytics"},{"location":"db/analytics-definitions/#analyticsdefinitions","title":"AnalyticsDefinitions","text":"<p>This table contains the details of each analytics provider that is available.</p> <ul> <li><code>ProductName</code> - Name of the analytics provider</li> <li><code>ProductKey</code> - They key or token to be used for the analytics provider</li> <li><code>DateModified</code> - The date the analytics have been created or amended</li> <li><code>Enabled</code> - Whether the analytics are switched on or not</li> <li><code>CookieControl</code> - Defines which cookie control is used, currently only supports Civica</li> </ul>"},{"location":"db/analytics-definitions/#versionanalytic","title":"VersionAnalytic","text":"<p>This table contains the details of which analytics should be used on specific versions..</p> <ul> <li><code>VersionID</code> - The ID of the version</li> <li><code>AnalyticsDefinitionID</code> - The ID of the analytics definition from the <code>AnalyticsDefinitions</code> table</li> </ul> <p>Note</p> <p>If you don't specify any versions the analytics tool will be applied to all of the versions. </p>"},{"location":"db/attributions/","title":"Attributions","text":"<p>All layers have an attribution, which appears at the bottom of the map and details basic copyright and licence information. We keep these in a database rather than relying on fetching metadata from the layer source for two main reasons:</p> <ul> <li>Speed - Retrieving individual attribution information from every layers GetCapabilities' is dependent on the speed of the web server, so can be slow.</li> <li>Availability - From experience, many services simply do not provide attribution information in their GetCapabilities, or it is wrong. Some types of layer (such as XYZ layers) do not even have this capability.</li> </ul>"},{"location":"db/attributions/#relevant-tables","title":"Relevant tables","text":"Table Name Description Attribution Contains the available attributions that can be applied to a layer LayerSource Contains the field <code>AttributionId</code> to indicate which attribution applies to this layer"},{"location":"db/attributions/#attribution","title":"Attribution","text":"<p>This table contains the attribution details. </p> <ul> <li><code>Name</code> - A friendly name for the attribution used by admins</li> <li><code>AttributionHTML</code> - The HTML used to display the attribution. Can be written in plain text, but if you need links you'll need to use HTML for that. Use the placeholder <code>{{CURRENT_YEAR}}</code> to inject the current year into the string.</li> </ul> <p>Example</p> <p><code>\u00a9 &lt;a href=\"https://www.dorsetcouncil.gov.uk\" target=\"blank\"&gt;Dorset Council&lt;/a&gt; {{CURRENT_YEAR}}.</code></p> <p>Renders as</p> <p>\u00a9 Dorset Council 2023.</p>"},{"location":"db/attributions/#layersource","title":"LayerSource","text":"<p>Within the <code>LayerSource</code> table, there is an <code>AttributionId</code> column. Set this to the <code>Id</code> in the <code>Attribution</code> table of the relevant attribution.</p>"},{"location":"db/basemaps/","title":"Basemaps","text":"<p>All versions have one or more basemaps (sometimes referred to as background maps). A basemap is made up of a layer source and a basemap definition.</p>"},{"location":"db/basemaps/#relevant-tables","title":"Relevant tables","text":"Table Name Description Basemap Basic details about available basemaps LayerSource Defines the source of the basemap VersionBasemap Mapping between basemaps and versions, showing which basemaps are available in which version"},{"location":"db/basemaps/#basemap","title":"Basemap","text":"<p>A basemap first requires a layer source to be created that defines where the layer comes from.</p> <p>Once this has been created, the basemap table has the following fields to fill in:</p> <ul> <li><code>LayerSourceId</code> - The <code>Id</code> from the <code>LayerSource</code> table</li> <li><code>PreviewImageURL</code> - A link to a suitable image that can be used in the preview window in the basemaps panel. This should be no more than 1000px wide and 200px tall</li> <li><code>BoundId</code> - The <code>Id</code> from the <code>Bound</code> table that defines what the max extent of this basemap is. By setting this to a non-global bound, the user will not be able to pan outside the defined bounding box when this basemap is turned on</li> <li><code>MaxZoom</code> - The maximum zoom level this basemap can be used at. This will prevent the user from zooming beyond what the basemap is capable of showing</li> <li><code>MinZoom</code> - As above, but for the minimum</li> </ul>"},{"location":"db/basemaps/#layersource","title":"LayerSource","text":"<p>For more information on how to create a suitable layer source, check the Layer Source documentation</p>"},{"location":"db/basemaps/#versionbasemap","title":"VersionBasemap","text":"<p>The <code>VersionBasemap</code> table defines which basemaps are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>BasemapId</code> - The <code>Id</code> from the <code>Basemap</code> table</li> <li><code>IsDefault</code> - Boolean indicating whether this basemap is the default one for that version</li> <li><code>DefaultOpacity</code> - The default opacity (or transparency) of the basemap between 0 (invisible) and 100 (opaque). Leave blank for default of 100</li> <li><code>DefaultSaturation</code> - The default saturation of the basemap between 0 (greyscale) and 100 (full colour). Leave blank for default of 100</li> <li><code>SortOrder</code> - The position the basemap will appear in the basemaps panel</li> </ul>"},{"location":"db/bounds/","title":"Bounds","text":"<p>The <code>Bound</code> table contains the geographic bounding box definitions that can be applied to layers or used as starting bounds in versions.</p>"},{"location":"db/bounds/#relevant-tables","title":"Relevant tables","text":"Table Name Description Bound Geographic bounding box definitions that can be applied to layers or used as starting bounds in versions Versions Contains a <code>BoundId</code> column used to define where the map starts on load Layer Contains an optional <code>BoundId</code> column used to define what bounds the layer covers Basemap Contains a <code>BoundId</code> column used to define what bounds the basemap covers"},{"location":"db/bounds/#bound","title":"Bound","text":"<p>This table contains the bound details. The coordinates are defined in Spherical Mercator EPSG:3857.</p> <ul> <li><code>Name</code> - A friendly name for the bound used by admins</li> <li><code>Description</code> - A more detailed description for the bound used by admins</li> <li><code>BottomLeftX</code> - The X coordinate for the bottom left of the bounding box</li> <li><code>BottomLeftY</code> - The Y coordinate for the bottom left of the bounding box</li> <li><code>TopRightX</code> - The X coordinate for the top right of the bounding box</li> <li><code>TopRightY</code> - The Y coordinate for the top right of the bounding box</li> </ul>"},{"location":"db/bounds/#versions","title":"Versions","text":"<p>Within the <code>Versions</code> table, there is a <code>BoundId</code> column. Set this to the <code>Id</code> in the <code>Bound</code> table of the relevant bound and the version will load with that initial extent. </p> <p>Note</p> <p>This does not stop users panning outside of those bounds (basemaps do that), it just sets the start extent when they first load the map.</p>"},{"location":"db/bounds/#layer","title":"Layer","text":"<p>Within the <code>Layer</code> table, there is an optional <code>BoundId</code> column. Set this to the <code>Id</code> in the <code>Bound</code> table of the relevant bound and the layer will not attempt to render or allow feature clicks outside of this bound. This can improve performance and efficiency, but is not required. Leave it blank for no bounds.</p>"},{"location":"db/bounds/#basemap","title":"Basemap","text":"<p>Within the <code>Basemap</code> table, there is a <code>BoundId</code> column. Set this to the <code>Id</code> in the <code>Bound</code> table of the relevant bound to restrict this basemap to that bound. This will also prevent users from panning outside of this bound. </p>"},{"location":"db/categories/","title":"Categories","text":"<p>All layers need to be within a category. Layers can appear in many categories. Categories can appear in many versions.</p>"},{"location":"db/categories/#relevant-tables","title":"Relevant tables","text":"Table Name Description Category Basic details about categories that layers can be sorted into CategoryLayer Mapping between layers and the categories they are added to VersionCategory Mapping between categories and versions, showing which categories are available in which version"},{"location":"db/categories/#category","title":"Category","text":"<p>This table contains the basic category details. </p> <ul> <li><code>Name</code> - The name of the category as it will appear in the layer control</li> <li><code>Description</code> - A friendly description of the category for administrators</li> <li><code>Order</code> - The order the category will appear in the layer control</li> <li><code>ParentCategoryId</code> - If this category is a child of another category, put the parents\u2019 category ID in here. If not, leave it blank.</li> </ul>"},{"location":"db/categories/#categorylayer","title":"CategoryLayer","text":"<p>The <code>CategoryLayer</code> table defines which layers are available in which categories.</p> <ul> <li><code>LayerId</code> - The <code>Id</code> from the <code>Layer</code> table</li> <li><code>CategoryId</code> - The <code>Id</code> from the <code>Category</code> table</li> <li><code>SortOrder</code> - The position this layer should appear within this category</li> </ul>"},{"location":"db/categories/#versioncategory","title":"VersionCategory","text":"<p>The <code>VersionCategory</code> table defines which categories are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>CategoryId</code> - The <code>Id</code> from the <code>Category</code> table</li> </ul> <p>Bug</p> <p>If you want this category to appear in many versions, but in different orders, you will need to make different categories, as the ordering cannot be set by version</p> <p>Info</p> <p>If your category is a child, both the parent AND child categories need to be added to this table.</p>"},{"location":"db/clear-cache/","title":"Clearing the cache","text":"<p>Most of the data in the database tables listed here are cached for varying amounts of time, to improve performance.</p> <p>You would usually use the management interface to clear the cache. If you do not have access to the management interface, you can either wait for the cache to invalidate by itself, or you will have to restart the application/recycle the application pool. This is dependent on your particular server configuration and is outside the scope of this documentation.</p>"},{"location":"db/clear-cache/#cached-items","title":"Cached items","text":"Name Key Cache length Version Configuration by Slug VersionBySlug/{slug} 10 minutes Version Configuration by ID Version/{id} 10 minutes User Roles by User ID UserRole/{userId} 2 minutes Web Layer Service Definitions WebLayerServiceDefinitions 10 minutes Proxy Allowed Hosts ProxyAllowedHosts 12 hours Print Configuration by Version PrintConfigurationByVersion/{versionId} 10 minutes Search Definitions by Version SearchDefinitions/{versionId} 10 minutes API Search Definitions APISearchDefinitions 1 hour Database Search Definitions DBSearchDefinitions 1 hour Local Search Definitions LocalSearchDefinitions 1 hour"},{"location":"db/getting-started/","title":"Getting started with the database","text":"<p>Here be dragons</p> <p>Making changes direct to the database without fully understanding the implications can result in GIFramework Maps being unusable. Be very careful</p> <p>Most settings related to the day to day use of GIFramework Maps is held in the database. You can directly edit these values if the administration interface is not working or you need to do things in bulk. You'll need to be logged in to the database as a user with create and edit permission.</p>"},{"location":"db/getting-started/#understanding-what-the-tables-do","title":"Understanding what the tables do","text":"<p>There are a number of tables in the database that manage different parts of the application. Below is a list of all the tables and their primary purpose. You should look up the related documentation for each feature to understand exactly how the tables work.</p> Table Name Description Detailed documentation ApplicationRoles Contains all the available Roles users can have. This should not be edited as it is tied directly to the application code Administrative roles ApplicationUserRoles Mapping between user identifiers and the roles they have Administrative roles Attribution Contains the available attributions that can be applied to a layer Attributions Basemap Basic details about available basemaps Basemaps Bound Geographic bounding box definitions that can be applied to layers or used as starting bounds in versions Bounds Category Basic details about categories that layers can be sorted into Categories CategoryLayer Mapping between layers and the categories they are added to Categories Layer Basic details about a published layer and how it can be used Layers LayerSource Basic details about the source of a layer, including the type (TileWMS, XYZ etc.) and its attribution Layers LayerSourceOption Contains the details about where a layer comes from and the options that will be applied to it Layers LayerSourceType Lookup list describing the types of layers available. This should not be edited as it is tied directly to the application code Layers PrintConfigurations Contains the configurations for prints that can be applied to a version Print configuration ProxyAllowedHosts Contains a list of allowed hosts that can use the proxy capabilities. Anything not in this list will be rejected by the proxy Proxy SearchDefinitions Contains details of the searches that can be used in versions Search definitions Theme Basic theme information that can be applied to versions, including logos and colours Theming TourDetails Basic details about available tours that can be applied to versions, including frequency and update dates Tours TourStep Contains the individual steps of a tour Tours VersionBasemap Mapping between basemaps and versions, showing which basemaps are available in which version Versions VersionCategory Mapping between layer categories and versions, showing which categories are available in which version Versions VersionPrintConfiguration Mapping between print configurations and versions, showing which print configurations are available in which version Versions VersionSearchDefinition Mapping between search definitions and versions, showing which search definitions are available in which version Versions VersionUser Mapping between user identifiers and versions, showing which users have access to which login required versions Versions Versions Contains the basic details about a version, including name, slug, start bound, theme and more Versions WebLayerServiceDefinitions Contains all the pre-defined external web services that can be used to add additional layers to the map. Applied globally Web Service definitions WelcomeMessages Contains the welcome message definitions that can be applied to a version Welcome messages __EfMigrationsHistory A table used by the application to keep track of the current state of the database. This should not be edited as it is tied directly to the application code N/A"},{"location":"db/layers/","title":"Layers","text":"<p>Layers are the bedrock of GIFramework Maps. Without layers, your maps are basically useless.</p> <p>Layers are pretty configurable, and have lots of various options, some of which are quite complex to set properly. For this reason, you should consider using the management interface if you can.</p>"},{"location":"db/layers/#relevant-tables","title":"Relevant tables","text":"Table Name Description Layer Basic details about a published layer and how it can be used LayerSource Basic details about the source of a layer, including the type (TileWMS, XYZ etc.) and its attribution LayerSourceOption Contains the details about where a layer comes from and the options that will be applied to it LayerSourceType Lookup list describing the types of layers available. This should not be edited as it is tied directly to the application code CategoryLayer Mapping between layers and the categories they are added to LayerDisclaimers List of disclaimers that can be added to a layer"},{"location":"db/layers/#adding-a-layer","title":"Adding a layer","text":"<p>Layers have two main parts to them, the Layer, and the Layer Source. When you add a layer, the first thing you do is define the Layer Source.</p>"},{"location":"db/layers/#layersource","title":"LayerSource","text":"<p>The <code>LayerSource</code> table contains very basic information about the layer.</p> <ul> <li><code>Name</code> - A friendly name for administrators.</li> <li><code>Description</code> - A basic description of the layer. This is shown to end users when the layer has no other description metadata available from source (see more about layer metadata below)</li> <li><code>LayerSourceTypeId</code> - The <code>Id</code> of the type of layer from the <code>LayerSourceType</code> table. This identifies the type of layer source this is. See LayerSourceType details below for more information.</li> <li><code>AttributionId</code> - The <code>Id</code> of the relevant <code>Attribution</code> that will be applied to this layer. Learn more about attributions in the attributions documentation</li> <li><code>MinZoom</code> - the minimum published zoom level this source has available. Setting these options allows you to make use of over and under-zooming the source. Leave blank for no minimum. This only applies to XYZ layers.</li> <li><code>MaxZoom</code> - the maximum published zoom level this source has available. Setting these options allows you to make use of over and under-zooming the source. Leave blank for no maximum. This only applies to XYZ layers.</li> </ul>"},{"location":"db/layers/#layersourceoption","title":"LayerSourceOption","text":"<p>The <code>LayerSourceOption</code> table contains the majority of the technical information required to show a layer. It is a one-to-many table, so one <code>LayerSource</code> can have many linked <code>LayerSourceOption</code>s, depending on the requirements of the layer. It is a simple key/value store with the following columns:</p> <ul> <li><code>Name</code> - This is the key, and should be set to one of the following understood values:<ul> <li><code>url</code></li> <li><code>params</code></li> <li><code>cswendpoint</code></li> <li><code>projection</code></li> <li><code>tilegrid</code></li> </ul> </li> <li><code>Value</code> - This is the value. See below for details on what this should contain</li> <li><code>LayerSourceId</code> - The <code>Id</code> of the relevant <code>LayerSource</code> that this option applies to</li> </ul>"},{"location":"db/layers/#xyz-layers","title":"XYZ Layers","text":"<p>The only required option required for XYZ layers is <code>url</code>. This should be set to the URL endpoint for the service, with templates for the X, Y and Z portions. The provider normally provides this for you.</p> <p>Example</p> <p>https://api.os.uk/maps/raster/v1/zxy/layer/{z}/{x}/{y}.png</p> <p>This assumes the layer is provided in the standard Spherical Mercator EPSG:3857 projection. If the service is providing tiles in a different projection, see the advanced configuration section below.</p>"},{"location":"db/layers/#wms-layers","title":"WMS layers","text":"<p>For WMS layers (TileWMS or ImageWMS), you need a minimum of <code>url</code> and <code>params</code> set.</p> <p><code>url</code></p> <p>This should be set to the 'base' url of the WMS service. This is normally provided to you by the service, and will look something like <code>https://&lt;service-url&gt;/wms</code></p> <p><code>params</code></p> <p>This is a JSON object of additional parameters that are applied to the layer.</p> <p>The <code>params</code> object should at a minimum contain the following</p> <pre><code>{\n    \"LAYERS\": \"LAYERNAME\", \n    \"FORMAT\": \"image/png\", /*replace with required format*/\n    \"TILED\":\"true\"\n}\n</code></pre> <p>These parameters will be used by OpenLayers to make appropriate requests to the service. Additional parameters as required by the service can be added be appending them onto the JSON object.</p> <p>Common additional parameters you may want to use include:</p> <ul> <li><code>CQL_FILTER</code> - Will apply a CQL filter to the layer</li> <li><code>STYLES</code> - Will set the style of the layer to a specific style available to the server</li> <li><code>AUTHKEY</code> - If the service uses AUTHKEY authentication (or any other type of key based authentication)</li> </ul> <p>Warning</p> <p>Incorrectly formatting this JSON object can result in the layer or the entire map failing to load correctly. Edit with caution.</p>"},{"location":"db/layers/#vector-layers","title":"Vector layers","text":"<p>For vector layers, you will need a minimum of the <code>url</code> option. Additionally, unless you want the default OpenLayers styles, you will need a <code>style</code> option as well. See Styling vector layers for more information.</p> <p>Additional options include: - <code>typename</code> - When using a WFS service, you should set the <code>url</code> to the base server URL, and the <code>typename</code> as the layer name you are requesting - <code>format</code> - The format the data is in. Defaults to 'application/json' unless specified. - <code>loadingStrategy</code> - Can be <code>bbox</code> or <code>all</code>. This defines how the vector layer is loaded, either with a bbox strategy (loading just a bounding box worth of data at a time) or loading everything at once. In reality, WFS based layers will default to <code>bbox</code> unless specifically set to <code>all</code>, and non-WFS layers will default to <code>all</code></p> <p>Supported vector formats</p> <ul> <li>JSON (<code>application/json</code>, <code>text/json</code>, <code>geojson</code> or <code>json</code>)</li> <li>GML3 (<code>text/xml; subtype=gml/3.1.1</code>, <code>gml3</code>)</li> <li>GML2 (<code>text/xml; subtype=gml/2.1.2</code>, <code>gml2</code>)</li> <li>KML (<code>application/vnd.google-earth.kml xml</code>, <code>application/vnd.google-earth.kml+xml</code>, <code>kml</code>)</li> </ul> <p>Limitation</p> <p>Vectors cannot have a filter pre-applied to them.</p>"},{"location":"db/layers/#other-options","title":"Other options","text":"<ul> <li><code>projection</code> - If the layer is only available in a projection that is not the same as the map you are putting it in to, set the projection here, otherwise you can not include it, and the layer will be requested in the projection of the map. For XYZ layers, see the section on XYZ reprojection</li> </ul>"},{"location":"db/layers/#layer","title":"Layer","text":"<p>A layer first requires a layer source to be created that defines where the layer comes from.</p> <p>Once this has been created, the layer table has the following fields to fill in:</p> <ul> <li><code>Name</code> - The friendly name that will appear in the layer control</li> <li><code>LayerSourceId</code> - The <code>Id</code> from the <code>LayerSource</code> table</li> <li><code>BoundId</code> - An optional <code>Id</code> from the <code>Bound</code> table that defines what the max extent of this layer is. Setting this prevents GIFramework Maps from requesting tiles or doing feature requests outside of the set bounds. This improves performance and efficiency, but is not required. Leave blank for no restriction</li> <li><code>MaxZoom</code> - The maximum zoom this layer will be turned on for, for example if set to 15, the layer will turn off once you zoom in past level 15. Set to blank for no restriction</li> <li><code>MinZoom</code> - As above, but the other way round, for example if set to 12, the layer will turn off once you zoom out past level 12</li> <li><code>ZIndex</code> - This is the 'layer order' on the map. Higher numbers will, by default, appear above lower numbers when both layers are turned on. For things like Aerial Photography, this should generally be set very low (such as -500). Leave blank for default of 0</li> <li><code>DefaultOpacity</code> - The default opacity (or transparency) of the layer between 0 (invisible) and 100 (opaque). Leave blank for default of 100</li> <li><code>DefaultSaturation</code> - The default saturation of the layer between 0 (greyscale) and 100 (full colour). Leave blank for default of 100</li> <li><code>InfoTemplate</code> - The template for what appears when you select a single map feature.. See Info Templates below for more information</li> <li><code>InfoListTitleTemplate</code> - The template for what appears when you click multiple items and are presented with a list of features. See Info Templates below for more information</li> <li><code>Queryable</code> - A Boolean indicating whether the user is allowed to query (info click) this layer</li> <li><code>DefaultFilterEditable</code> - A Boolean indicating if the user is allowed to edit any filters already applied to the layer in the layer source</li> <li><code>Filterable</code> - A Boolean indicating if the user is allowed to apply filters to this layer</li> <li><code>ProxyMapRequests</code> - A Boolean indicating if all GetMap requests should be proxied via the application proxy. Only use this if a remote layer can't handle CORS requests (errors will appear in the console and layer control when using this layer if this is the case). See Proxying for more details</li> <li><code>ProxyMetaRequests</code> - As above, but related to all metadata and query requests, such as <code>GetCapabilities</code> and <code>GetFeatureInfo</code>. See Proxying for more details</li> <li><code>LayerDisclaimerId</code> - An optional <code>Id</code> from the <code>Layer Disclaimers</code> table that defines which disclaimer to show for this layer. Leave blank for no disclaimer</li> <li><code>RefreshInterval</code> - Optional. How often this layer should automatically refresh with new data from the server, in seconds.</li> </ul>"},{"location":"db/layers/#info-templates","title":"Info Templates","text":"<p>See 'Creating info templates'</p>"},{"location":"db/layers/#categorylayer","title":"CategoryLayer","text":"<p>The <code>CategoryLayer</code> table defines which layers are available in which categories.</p> <ul> <li><code>LayerId</code> - The <code>Id</code> from the <code>Layer</code> table</li> <li><code>CategoryId</code> - The <code>Id</code> from the <code>Category</code> table</li> <li><code>SortOrder</code> - The position this layer should appear within this category</li> </ul>"},{"location":"db/layers/#layersourcetype","title":"LayerSourceType","text":"<p>There are currently 7 supported layer types in GIFramework Maps. More may be added in the future.</p>"},{"location":"db/layers/#xyz","title":"XYZ","text":"<p>The XYZ source is used for tile data that is accessed through URLs that include a zoom level and tile grid x/y coordinates. Examples include OpenStreetMap and OpenCycleMap.</p>"},{"location":"db/layers/#tilewms","title":"TileWMS","text":"<p>The TileWMS source is used for WMS layers that are provided 'tiled', normally in 256px squares.</p> <p>This is normally the best option, as it is more efficient and quicker, and can be cached by the users browser, but it can sometimes have issues with labels, or some services might not provide it. In these cases, use ImageWMS.</p>"},{"location":"db/layers/#imagewms","title":"ImageWMS","text":"<p>The ImageWMS source is used for WMS layers that are provided 'untiled', so a single image is returned for the entire map screen. Normally you would choose TileWMS when available, but ImageWMS is particularly good if you have labels, or, if the layer is very complex, a single tile can load quicker than many smaller tiles.</p>"},{"location":"db/layers/#vector","title":"Vector","text":"<p>The Vector source is used for WFS layers or file based layers (such as a KML or GeoJSON file at a specific URL). Currently, GIFramework Maps can handle GML2, GML3, GeoJSON, JSON and KML formats as a vector source. This source type uses standard vector rendering, so is very precise and can handle things like rotating labels, but because of this it is not suitable for large datasets or those with complex geometries.</p>"},{"location":"db/layers/#vectorimage","title":"VectorImage","text":"<p>The VectorImage source is fundamentally the same as the Vector source, but can handle larger datasets and geometries slightly better, by rendering the vector as an image on the client. This does mean some sharpness is occasionally lost, and things like labels don't rotate, but its much less 'laggy' when moving the map around with large or complex datasets.</p>"},{"location":"db/layers/#vectortile","title":"VectorTile","text":"<p>The VectorTile source is used to render VectorTiles, a common format for things like basemaps which splits vectors up into tiles and delivers them efficiently to the browser (learn more). MVT (Mapbox Vector Tiles) is the most common standard for this.</p>"},{"location":"db/layers/#ogc-vectortile","title":"OGC VectorTile","text":"<p>The OGC VectorTile format is the new OGC standard for VectorTiles. It works in a similar way to VectorTiles, but is the standard promoted by the Open Geospatial Consortium. </p>"},{"location":"db/layers/#advanced-configuration","title":"Advanced configuration","text":""},{"location":"db/layers/#xyz-reprojection","title":"XYZ reprojection","text":"<p>XYZ layers can be provided in different projections. To make use of on the fly reprojection, you need to provide an appropriate <code>tilegrid</code> option, describing the resolutions and origins of the XYZ layer. The service provider should be able to provide this.</p> <p>Example</p> <p>The `tilegrid' for British National Grid EPSG:27700 is <pre><code>{\n    \"resolutions\": [896.0, 448.0, 224.0, 112.0, 56.0, 28.0, 14.0, 7.0, 3.5, 1.75],\n    \"origin\": [-238375.0, 1376256.0]\n}\n</code></pre></p>"},{"location":"db/layers/#layer-disclaimers","title":"Layer Disclaimers","text":"<p>You can add popup disclaimers to your layers that show when a user turns on a layer. The first step is to add a new disclaimer with the details you need.</p> <ul> <li><code>Name</code> - A friendly name for administrators</li> <li><code>Disclaimer</code> - The disclaimer to show. This can be plain text or HTML</li> <li><code>Frequency</code> - A number indicating how often to show the disclaimer. Available options are:<ul> <li><code>-1</code> - Indicates that the disclaimer should only be shown once, and never again</li> <li><code>0</code> - Indicates that the disclaimer should be shown once per browsing session. Refreshes do not count as a new session, but new tabs do. This prevents users from constantly being bombarded with the message every time they turn the layer on/off</li> <li><code>Any positive number</code> - Indicates the number of days to leave between showing the disclaimer again.</li> </ul> </li> <li><code>Dismiss Text</code> - Optional text to show on the dismiss button. Defaults to 'Close' if you leave it blank</li> </ul>"},{"location":"db/print-config/","title":"Print Configuration","text":"<p>Print configurations are basic details on the layout of prints in a version.</p> <p>Work in progress</p> <p>Currently the only supported customisation is the logo that appears on the print. More options will be added in the future</p>"},{"location":"db/print-config/#relevant-tables","title":"Relevant tables","text":"Table Name Description PrintConfigurations Contains the configurations for prints that can be applied to a version VersionPrintConfiguration Mapping between print configurations and versions, showing which print configurations are available in which version"},{"location":"db/print-config/#printconfigurations","title":"PrintConfigurations","text":"<p>This table contains the details of all your custom print configurations.</p> <ul> <li><code>Name</code> - A friendly name for the configuration used by admins</li> <li><code>LogoURL</code> - The URL to a logo that will be drawn on to the map</li> </ul>"},{"location":"db/print-config/#versionprintconfiguration","title":"VersionPrintConfiguration","text":"<p>The <code>VersionPrintConfiguration</code> table defines which print configurations are used in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>PrintConfigurationId</code> - The <code>Id</code> from the <code>PrintConfigurations</code> table</li> </ul> <p>Note</p> <p>If a specific configuration is not set for a version, it will fall back to that defined for the 'general' version</p>"},{"location":"db/projections/","title":"Projections","text":"<p>GIFramework Maps can use multiple projections for both the actual map rendering and the display coordinates. The Projections table defines what projections are available to the application.</p>"},{"location":"db/projections/#relevant-tables","title":"Relevant tables","text":"Table Name Description Projections The projection definitions VersionProjections Table that defines which versions have which projections"},{"location":"db/projections/#projections_1","title":"Projections","text":"<p>This table contains the projection definition.</p> <ul> <li><code>EPSGCode</code> - The EPSG code of the projection. </li> <li><code>Name</code> - The name of the projection</li> <li><code>Description</code> - A description of what this projection is and where it covers</li> <li><code>Proj4Definition</code> - A Proj4 or WKT definition of the projection</li> <li><code>MinBoundX</code> - The bottom left X coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>MinBoundY</code> - The bottom left Y coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>MaxBoundX</code> - The top right X coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>MaxBoundY</code> - The top right Y coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>DefaultRenderedDecimalPlaces</code> - The number of decimal places shown by default when showing coordinates in this projection</li> </ul>"},{"location":"db/projections/#versionprojections","title":"VersionProjections","text":"<p>See VersionProjections</p>"},{"location":"db/proxy/","title":"Proxying","text":"<p>GIFramework Maps has an in-built proxy based on Microsoft's YARP. This can be used when layers can't be used with CORS, which is required for rendering layers and making metadata and feature requests.</p> <p>The proxy can be enabled for specific layers or web service definitions. Read the documentation on those features to see how to enable the proxy.</p> <p>The proxy directs requests via the application, so an allow list is used to make sure only domains you want to proxy are proxied.</p> <p>Warning</p> <p>Proxying requests can reduce performance and may even be blocked by the service provider. If in doubt, check with the service provider.</p>"},{"location":"db/proxy/#relevant-tables","title":"Relevant tables","text":"Table Name Description ProxyAllowedHosts Contains a list of allowed hosts that can use the proxy capabilities. Anything not in this list will be rejected by the proxy"},{"location":"db/proxy/#proxyallowedhosts","title":"ProxyAllowedHosts","text":"<p>This table contains a simple list of all allowed 'hosts'. The host portion includes the domain and any sub-domains, but not the protocol or anything after the domain name.</p> <p>Example</p> <p> Good</p> <ul> <li>environment.data.gov.uk</li> <li>map.bgs.ac.uk</li> </ul> <p> Invalid</p> <ul> <li>https://mapservice.example.com</li> <li>mapservice.example.com/services/wms</li> </ul>"},{"location":"db/search-definitions/","title":"Search Definitions","text":"<p>Search definitions define what searches are available in the search bar and how they work.</p>"},{"location":"db/search-definitions/#relevant-tables","title":"Relevant tables","text":"Table Name Description SearchDefinitions Contains details of the searches that can be used in versions VersionSearchDefinition Mapping between search definitions and versions, showing which search definitions are available in which version"},{"location":"db/search-definitions/#searchdefinitions","title":"SearchDefinitions","text":"<p>This table contains all the details about the available search definitions.</p> <p>The first block of columns is the basic details.</p> <ul> <li><code>Name</code> - A friendly name for administrators</li> <li><code>Title</code> - The name that will appear in the search results list</li> <li><code>AttributionHtml</code> - Optional HTML to add to the bottom of the search results as an attribution</li> <li><code>MaxResults</code> - The maximum number of results to return from the service</li> <li><code>ZoomLevel</code> - The zoom level to zoom to when a user clicks a search result. Optional if a geometry path, column or minimum bounding rectangle is defined</li> <li><code>EPSG</code> - The EPSG code of the geometry returned</li> <li><code>ValidationRegex</code> - An optional Regular Expression to validate the search query against. If a search query doesn't match the regualr expression, it won't even be attempted. Leave blank for no validation</li> <li><code>SupressGeom</code> - A boolean indicating if the returned geometry should be supressed or not. This prevents a pin, line or polygon from being drawn on the map when a user clicks on a search result</li> </ul> <p>The next block of columns are filled in depending on the `Discriminator' column. These are different depending on the type of search definition you are creating.</p> <ul> <li><code>Discriminator</code> - Defines the type of search definition this is. There are 3 possible options:<ul> <li><code>APISearchDefinition</code> - Defines a search that calls a remote web API</li> <li><code>DatabaseSearchDefinition</code> - Defines a search that uses a locally accessible database table</li> <li><code>LocalSearchDefinition</code> - Definies a search that is built in to the application itself.</li> </ul> </li> </ul>"},{"location":"db/search-definitions/#apisearchdefinition","title":"APISearchDefinition","text":"<p>If you choose <code>APISearchDefinition</code>, the following columns are relevant:</p> <p>Note</p> <p>Only <code>GET</code> requests that return JSON are currently supported for API calls</p> <ul> <li><code>URLTemplate</code> - The full URL to do the search, with the placeholder {{search}} where the search query would go</li> <li><code>XFieldPath</code> - A JSONPath expression to an appropriate 'X' field in the JSON. Optional if you use <code>GeomFieldPath</code> or the <code>MBRPath...</code> columns.</li> <li><code>YFieldPath</code> - A JSONPath expression to an appropriate 'Y' field in the JSON. Optional if you use <code>GeomFieldPath</code> or the <code>MBRPath...</code> columns.</li> <li><code>TitleFieldPath</code> - A JSONPath expression to an appropriate 'Title' field, used for displaying the search result.</li> <li><code>GeomFieldPath</code> - A JSONPath expression to appopriate 'Geometry' field. The geometry must be valid GeoJSON. Optional if you use <code>XFieldPath</code>/<code>YFieldPath</code> or the <code>MBRPath...</code> columns.</li> <li><code>MBRXMinPath</code> - A JSONPath expression to an appropriate bottom left X coordinate minimum bounding rectangle field. Optional if you use <code>XFieldPath</code>/<code>YFieldPath</code> or<code>GeomFieldPath</code>. </li> <li><code>MBRXMaxPath</code> - A JSONPath expression to an appropriate top right X coordinate minimum bounding rectangle field. Optional if you use <code>XFieldPath</code>/<code>YFieldPath</code> or<code>GeomFieldPath</code>. </li> <li><code>MBRYMinPath</code> - A JSONPath expression to an appropriate bottom left Y coordinate minimum bounding rectangle field. Optional if you use <code>XFieldPath</code>/<code>YFieldPath</code> or<code>GeomFieldPath</code>. </li> <li><code>MBRYMaxPath</code> - A JSONPath expression to an appropriate top right Y coordinate minimum bounding rectangle field. Optional if you use <code>XFieldPath</code>/<code>YFieldPath</code> or<code>GeomFieldPath</code>. </li> </ul> <p>Info</p> <p><code>JSONPath</code> is a query language for JSON, similar to XPath for XML. It allows you to select and extract data from a JSON document. You can use tools such as JSON Path Finder or JSONPath Online Evaluator to build JSONPath expressions.</p>"},{"location":"db/search-definitions/#databasesearchdefinition","title":"DatabaseSearchDefinition","text":"<p>If you choose `DatabaseSearchDefinition , the following columns are relevant:</p> <ul> <li><code>TableName</code> - The fully qualified name of the table to query</li> <li><code>XField</code> - The name of an appropriate 'X' column in the table</li> <li><code>YField</code> - The name of an appropriate 'Y' column in the table</li> <li><code>GeomField</code> - The name of an appopriate GeoJSON geometry column in the table. You may need to use a database function to convert the geometry to GeoJSON, such as Postgres' <code>ST_AsGeoJson(geom)</code></li> <li><code>TitleField</code> - The name of an appropriate 'Title' field, used for displaying the search result.</li> <li><code>WhereClause</code> - The <code>WHERE</code> clause used to do the actual search, with the placeholder {{search}} where the search query would go</li> <li><code>OrderByClause</code> - An optional <code>ORDER BY</code> to append to the query</li> </ul> <p>Note</p> <p>The same user that is used to access the GIFramework Maps database must be able to access the tables you use in these search definitions. You may want to consider using foreign tables to avoid duplicating data</p>"},{"location":"db/search-definitions/#localsearchdefinition","title":"LocalSearchDefinition","text":"<p><code>LocalSearchDefinition</code>s are a little different. These refer to searches that are in-built to the application, and have specific names. The only relevant column is <code>LocalSearchName</code>, which refers to the hard-coded name in the application. The following in-built searches are available:</p> <ul> <li><code>BNG12Figure</code> - Searches for 12 Figure British National Grid coordinates</li> <li><code>BNGAlphaNumeric</code> - Searches for British National Grid Alphanumeric coordinates</li> <li><code>LatLonDecimal</code> - Searches for Latitiude/Longitude coordinates in Decimal format</li> <li><code>LatLonDMS</code> - Searches for Latitiude/Longitude coordinates in Degrees/Minutes/Seconds format</li> <li><code>SphericalMercator</code> - Searches for Spheric Mercator (EPSG:3857) coordinates</li> <li><code>PlusCode</code> - Searches for PlusCodes</li> </ul>"},{"location":"db/search-definitions/#versionsearchdefinition","title":"VersionSearchDefinition","text":"<p>The <code>VersionSearchDefinition</code> table defines which searches are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>SearchDefinitionId</code> - The <code>Id</code> from the <code>SearchDefinition</code> table</li> <li><code>Enabled</code> - A boolean indicating whether this search is enabled by default (users can override this in the search options dialog)</li> <li><code>Order</code> - The order in which the search results are searched. Particularly important if the <code>StopIfFound</code> boolean is used</li> <li><code>StopIfFound</code> - Determines whether the further searches are conducted if a result has been found with this search</li> </ul> <p>Example</p> <p>When you do a search, GIFramework Maps starts from the top of the list (sorted by the <code>Order</code> column) and works its way down until it finds a result. When it does, if the <code>StopIfFound</code> boolean is set to true, GIFramework Maps will not continue with any of the other searches. This prevents users from getting lots of potentially irrelevant results when a more relevant result has already been found. </p> <p>Note</p> <p>If a specific search definition configuration is not found for a version, it will fall back to using search definitions defined for the 'general' version</p>"},{"location":"db/theming/","title":"Theming","text":"<p>Versions in GIFramework Maps can have different themes applied to them.</p>"},{"location":"db/theming/#relevant-tables","title":"Relevant tables","text":"Table Name Description Theme Basic theme information that can be applied to versions, including logos and colours Versions Contains a <code>ThemeId</code> column used to define what theme is applied to this version"},{"location":"db/theming/#theme","title":"Theme","text":"<p>This table contains the theme details.</p> <ul> <li><code>Name</code> - A friendly name for the theme used by admins</li> <li><code>Description</code> - A more detailed description for the theme used by admins</li> <li><code>PrimaryColour</code> - The hex code (without the <code>#</code>) for the primary colour used in the theme</li> <li><code>LogoURL</code> - A URL to the logo that appears in the top left. Ideally this should be an SVG or PNG</li> <li><code>CustomFaviconURL</code> - An  optional URL to a folder containing the following four favicon items:<ul> <li><code>favicon.ico</code></li> <li><code>apple-touch-icon-precomposed.png</code></li> <li><code>android-chrome-192x192.png</code></li> <li><code>android-chrome-512x512.png</code></li> </ul> </li> </ul>"},{"location":"db/theming/#versions","title":"Versions","text":"<p>Within the <code>Versions</code> table, there is a <code>ThemeId</code> column. Set this to the <code>Id</code> in the <code>Theme</code> table of the theme you want to apply.</p>"},{"location":"db/tours/","title":"Tours","text":"<p>Tours are used to give users a quick overview of the features of GIFramework Maps. Tours are highly configurable, and different tours can be applied to specific versions.</p>"},{"location":"db/tours/#relevant-tables","title":"Relevant tables","text":"Table Name Description TourDetails Basic details about available tours that can be applied to versions, including frequency and update dates TourStep Contains the individual steps of a tour Versions Contains an optional <code>TourDetailsId</code> column used to define which tour to use"},{"location":"db/tours/#tourdetails","title":"TourDetails","text":"<p>This table contains the basic, top level tour details</p> <ul> <li><code>Name</code> - a friendly name for the tour used by admins</li> <li><code>Frequency</code> - a number indicating how often to show the tour. Available options are:<ul> <li><code>-1</code> - indicates that the tour should only be shown once, and never again</li> <li><code>0</code> - indicates that the tour should always be shown</li> <li><code>Any positive number</code> - indicates the number of days to leave between showing the tour again.</li> </ul> </li> <li><code>UpdateDate</code> - a date when this tour has been updated enough to re-show it to the user. For example, if you make significant changes to the tour and want to forcibly re-trigger it for all users, set this to the current date, and anyone who hasn't viewed or dismissed the tour since that date will be re-prompted</li> </ul>"},{"location":"db/tours/#toursteps","title":"TourSteps","text":"<p>This table contains the individual steps used in a tour</p> <ul> <li><code>Title</code> - this text will appear in bold at the top of the tour step</li> <li><code>Content</code> - what you want your step to say. You should include HTML markup for links and also target=\"_blank\" as this will make sure the link opens in a new window</li> <li><code>AttachToSelector</code> - a CSS selector you want the tour step to attach to (include the '.'), if you leave this blank the tour step will float in the middle of the screen</li> <li><code>AttachToPosition</code> - where on the selector you want the tour step to attach (if you've chosen one). Should be one of <code>top</code>, <code>left</code>, <code>bottom</code>, <code>right</code></li> <li><code>StepNumber</code> - the order in which the step will appear within the tour</li> <li><code>TourDetailId</code> - the ID from the <code>TourDetails</code> table of the tour this step is attached to</li> </ul>"},{"location":"db/tours/#versions","title":"Versions","text":"<p>Within the <code>Versions</code> table, there is a <code>TourDetailsId</code> column. Set this to the <code>Id</code> in the <code>TourDetails</code> table of the relevant tour you want to use with this version. Leave blank for no tour.</p> <p>Warning</p> <p>This feature relies on <code>localStorage</code>, a browser feature that allows us to store small amounts of data on the users browser. Some users or organisation may disable <code>localStorage</code>, in which case the tour will always trigger, regardless of the frequency setting</p>"},{"location":"db/versions/","title":"Versions","text":"<p>Versions are the best way to split maps up into different themes, with different layers, permissions and functionality.</p> <p>The <code>Versions</code> table contains all the basic information about a version of GIFramework Maps. </p>"},{"location":"db/versions/#relevant-tables","title":"Relevant tables","text":"Table Name Description Versions Contains the basic details about a version, including name, slug, start bound, theme and more VersionAnalytic Identifies which analytics providers are enabled for a version VersionBasemaps Contains details of the basemaps that a version has available and their default options VersionCategory Contains a list of layer categories that a version has VersionContact Lists the users that should be contacted regarding a version VersionEmailBasedAuthorizations Lists versions with a set of Regular Expressions to allow users to be authorized to versions by email address format rather than per user VersionLayer Contains per-layer customisations applied to a version VersionPrintConfiguration Identifies which print configuration a version uses VersionProjections Lists the projections available to a version and what the defaults are VersionSearchDefinition Lists the search definitions that are enabled in a version and their default settings VersionUser Contains the users that have access to a version"},{"location":"db/versions/#versions_1","title":"Versions","text":"<ul> <li><code>Name</code> - The name of the version. This also appears to the user in the top left</li> <li><code>Description</code> - A friendly description of the version. This also appears in the HTML meta description which is shown to search engines</li> <li><code>Slug</code> - The <code>Slug</code> is the bit on the end of the URL. You can have up to 3 parts to a slug, seperated by slashes. See slugs for more info</li> <li><code>Enabled</code> - A boolean indicating whether this version is enabled or not. Disabled versions will show a specific 'Disabled' message, rather than the standard 'Not found'</li> <li><code>RequireLogin</code> - A boolean indicating whether this version requires the user to login or not. Permissions need to be given to users using the <code>VersionUser</code> table.</li> <li><code>RedirectionURL</code> - An optional URL to redirect the user to instead of loading the version. Can be useful if a version changes slug, or you want to point people elsewhere. Will issue a <code>HTTP 302 Found</code> response with the URL provided</li> <li><code>BoundId</code> - The <code>Id</code> of a <code>Bound</code> to use as the start extent for this version</li> <li><code>ThemeId</code> - The <code>Id</code> of the <code>Theme</code> to use in this version</li> <li><code>HelpURL</code> - An optional URL to help documentation. A link will be put in the header of GIFramework Maps and in various other places if this URL is filled in. If left blank, no help link will be generated.</li> <li><code>WelcomeMessageId</code> - The <code>Id</code> of the <code>WelcomeMessage</code> to use in this version. Leave blank for no welcome message.</li> <li><code>FeedbackURL</code> - An optional URL to a feedback form. A link will be put in the header of GIFramework Maps if this URL is filled in. If left blank, no feedback link will be generated.</li> <li><code>TourDetailsId</code> - The <code>Id</code> of a <code>TourDetails</code> to use in this version. Leave blank for no tour.</li> <li><code>ShowLogin</code> - A boolean indicating whether to show a login button on the version. If a user is already logged in, the account box will still always show, regardless of this setting</li> <li><code>VersionNotes</code> - An optional text area to record any notes about the version. These are only seen by admin and cannot be seen by users.</li> <li><code>FeaturedVersion</code> - A boolean indicating whether to show a version in the 'Featured versions' area on the versions home page. Leaving this unchecked will put the version with 'All versions' underneath.</li> <li><code>VersionImageURL</code> - An optional URL to an image that will show on a version's card on the version home page. If a URL is not supplied, a default image of the world will be used. We recommend image sizes of 400px by 200px for a neat and consistent look.</li> <li><code>Hidden</code> - A boolean indicating whether to hide a version from the versions home page (this will not delete a version or stop it being accessed directly by its URL).</li> </ul>"},{"location":"db/versions/#versionanalytic","title":"VersionAnalytic","text":"<p>The <code>VersionAnalytic</code> table defines which analytics providers are available in which versions.</p> <p>Slugs are the bit on the end of your application URL which direct you to different versions of GIFramework Maps. You can have a maximum of three slugs seperated by forward slashes. </p> <p>By default, there should be one called 'general' which is where you will be directed if you have no slug on your URL.</p> <p>Reserved slugs</p> <p>There are a number of slugs that are reserved for use by the GIFramework Maps application. Using these will not work and may cause other unintended consequences. </p> <ul> <li><code>general</code></li> <li><code>account</code></li> <li><code>api</code></li> <li><code>print</code></li> <li><code>search</code></li> <li><code>broadcasthub</code></li> <li><code>css</code></li> <li><code>img</code></li> <li><code>lib</code></li> </ul> <p>You should not use these as the first part of the slug, regardless of any additional parts you put on the end, e.g. <code>lib/myversion</code> is not valid</p> <p>Examples</p> <p>'general' -&gt; Root of application e.g. <code>https://&lt;your-application-root&gt;/</code></p> <p>'highways' -&gt; <code>https://&lt;your-application-root&gt;/highways</code></p> <p>'very/long/slug' -&gt; <code>https://&lt;your-application-root&gt;/very/long/slug</code></p>"},{"location":"db/versions/#versionbasemaps","title":"VersionBasemaps","text":"<p>The <code>VersionBasemap</code> table defines which basemaps are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>BasemapId</code> - The <code>Id</code> from the <code>Basemap</code> table</li> <li><code>IsDefault</code> - Boolean indicating whether this basemap is the default one for that version</li> <li><code>DefaultOpacity</code> - The default opacity (or transparency) of the basemap between 0 (invisible) and 100 (opaque). Leave blank for default of 100</li> <li><code>DefaultSaturation</code> - The default saturation of the basemap between 0 (greyscale) and 100 (full colour). Leave blank for default of 100</li> <li><code>SortOrder</code> - The position the basemap will appear in the basemaps panel</li> </ul>"},{"location":"db/versions/#versioncategory","title":"VersionCategory","text":"<p>The <code>VersionCategory</code> table defines which categories are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>CategoryId</code> - The <code>Id</code> from the <code>Category</code> table</li> </ul> <p>Bug</p> <p>If you want this category to appear in many versions, but in different orders, you will need to make different categories, as the ordering cannot be set by version</p> <p>Info</p> <p>If your category is a child, both the parent AND child categories need to be added to this table.</p>"},{"location":"db/versions/#versioncontact","title":"VersionContact","text":"<p>The <code>VersionContact</code> table defines which users should be contacted about a version.</p> <ul> <li><code>VersionContactId</code> - Unique ID for this entry</li> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>UserId</code> - The users unique identifier provided by the identity provider</li> <li><code>DisplayName</code> - The users display name</li> <li><code>Email</code> - The users email, if not derived from the UserId</li> <li><code>Enabled</code> - Whether they should be included in the email drafting list</li> </ul>"},{"location":"db/versions/#versionemailbasedauthorizations","title":"VersionEmailBasedAuthorizations","text":"<p>The <code>VersionEmailBasedAuthorizxations</code> table defines a list of Regular Expressions that will be used against certain versions for email based authorization. Using this, adminstrators can define a version as being 'allowed' for any user with an email matching a certain regular expression.</p> <p>Danger</p> <p>This is a powerful feature. Incorrectly built regular expressions can result in people being authorized to versions that should be. Use with caution.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>EmailRegEx</code> - The Regular Expression that will be used to evaluate the email address of the user</li> </ul> <p>Example</p> <p><code>.+@yourdomain.com</code> will allow any user who's email ends with @yourdomain.com access to this version. Case insensitive. You should be sure that only authorized users can have emails ending with @yourdomain.com</p>"},{"location":"db/versions/#versionlayer","title":"VersionLayer","text":"<p>The <code>VersionLayer</code> table contains any per-layer customisations that have been applied to this version.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>LayerId</code> - The <code>Id</code> from the <code>Layer</code> table</li> <li><code>CategoryId</code> - The <code>Id</code> from the <code>Category</code> table</li> <li><code>IsDefault</code> - Whether this layer is turned on by default or not</li> <li><code>DefaultOpacity</code> - The default opacity of the layer</li> <li><code>DefaultSaturation</code> - The default saturation of the layer</li> <li><code>SortOrder</code> - The position this layer appears within its category</li> <li><code>MaxZoom</code> - The maximum viewable zoom level of the layer</li> <li><code>MinZoom</code> - The minimum viewable zoom level of the layer</li> <li><code>Id</code> - Unique autogenerated ID for this customisation</li> </ul>"},{"location":"db/versions/#versionprintconfiguration","title":"VersionPrintConfiguration","text":"<p>The <code>VersionPrintConfiguration</code> table defines which print configurations are used in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>PrintConfigurationId</code> - The <code>Id</code> from the <code>PrintConfigurations</code> table</li> </ul> <p>Note</p> <p>If a specific configuration is not set for a version, it will fall back to that defined for the 'general' version</p>"},{"location":"db/versions/#versionprojection","title":"VersionProjection","text":"<p>The <code>VersionProjection</code> table defines which projection the map renders in and what projections are available for viewing.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>ProjectionId</code> - The <code>Id</code> from the <code>Projections</code> table</li> <li><code>IsDefaultMapProjection</code> - Whether this projection is the one used for map rendering</li> <li><code>IsDefaultViewProjection</code> - Whether this projection is the default one set as the display coordinates</li> </ul>"},{"location":"db/versions/#versionsearchdefinition","title":"VersionSearchDefinition","text":"<p>The <code>VersionSearchDefinition</code> table defines which searches are available in which versions.</p> <ul> <li><code>VersionId</code> - The <code>Id</code> from the <code>Versions</code> table</li> <li><code>SearchDefinitionId</code> - The <code>Id</code> from the <code>SearchDefinition</code> table</li> <li><code>Enabled</code> - A boolean indicating whether this search is enabled by default (users can override this in the search options dialog)</li> <li><code>Order</code> - The order in which the search results are searched. Particularly important if the <code>StopIfFound</code> boolean is used</li> <li><code>StopIfFound</code> - Determines whether the further searches are conducted if a result has been found with this search</li> </ul> <p>Example</p> <p>When you do a search, GIFramework Maps starts from the top of the list (sorted by the <code>Order</code> column) and works its way down until it finds a result. When it does, if the <code>StopIfFound</code> boolean is set to true, GIFramework Maps will not continue with any of the other searches. This prevents users from getting lots of potentially irrelevant results when a more relevant result has already been found. </p> <p>Note</p> <p>If a specific search definition configuration is not found for a version, it will fall back to using search definitions defined for the 'general' version</p>"},{"location":"db/versions/#versionuser","title":"VersionUser","text":"<p>The <code>VersionUser</code> table defines which individual users are allowed to access which versions. This only applies to versions with <code>RequireLogin</code> set to true.</p> <p>To give a user acess to a version, simply provide their user identifier and the ID from the <code>Versions</code> table.</p> <p>Hint</p> <p>You can get a user's identifier (or your own) by getting them to go to <code>https://&lt;your-application-root&gt;/account/diagnostics</code> and looking up the <code>nameidentifier</code> value.</p>"},{"location":"db/web-service-definitions/","title":"Web service definitions","text":"<p>The <code>WebLayerServiceDefinition</code> table contains details about pre defined services that users can add layers from onto their map. These services are defined just once for all versions.</p>"},{"location":"db/web-service-definitions/#relevant-tables","title":"Relevant tables","text":"Table Name Description WebLayerServiceDefinition Contains all the pre-defined external web services that can be used to add additional layers to the map. Applied globally"},{"location":"db/web-service-definitions/#weblayerservicedefinition","title":"WebLayerServiceDefinition","text":"<p>This table contains the details of each web service that is available to users.</p> <ul> <li><code>Name</code> - A friendly name for the service shown to end users</li> <li><code>Description</code> - A more detailed description for the service</li> <li><code>Url</code> - The base URL for the service</li> <li><code>Type</code> - The type of service. Currently only <code>WMS</code> is supported</li> <li><code>Version</code> - The version of the service. Leave blank and it will use version 1.1.0</li> <li><code>Category</code> - A category to group the list by. All services with the same category will be grouped in the select list presented to users</li> <li><code>ProxyMapRequests</code> - A boolean indicating whether all <code>GetMap</code> requests for layers added by this service will be proxied by the application proxy</li> <li><code>ProxyMetaRequests</code> - A boolean indicating whether all metadata and feature requests for this service will be proxied by the application proxy</li> </ul> <p>Warning</p> <p>Proxying requests can reduce performance and may even be blocked by the service provider. If in doubt, check with the service provider. </p> <p>Info</p> <p>Proxied <code>GetMap</code> requests are automatically switched to use a 'Single Tile' methodolgy, to improve performance. This may be changed in future versions.</p>"},{"location":"db/welcome-messages/","title":"Welcome messages","text":"<p>The welcome message is a popup that can appear when you first load the map. Welcome messages are configurable per version.</p>"},{"location":"db/welcome-messages/#relevant-tables","title":"Relevant tables","text":"Table Name Description WelcomeMessages Contains the welcome message definitions that can be applied to a version Versions Contains an optional <code>WelcomeMessageId</code> column used to define which welcome message to us in this version"},{"location":"db/welcome-messages/#welcomemessages","title":"WelcomeMessages","text":"<p>This table contains the welcome message details.</p> <ul> <li><code>Name</code> - A friendly name for the welcome message used by admins</li> <li><code>Title</code> - The title used in the popup of the welcome message</li> <li><code>Content</code> - The HTML content of the popup message</li> <li><code>Frequency</code> - A number indicating how often to show the welcome messages. Available options are:<ul> <li><code>-1</code> - Indicates that the message should only be shown once, and never again</li> <li><code>0</code> - Indicates that the message should always be shown</li> <li><code>Any positive number</code> - Indicates the number of days to leave between showing the message again.</li> </ul> </li> <li><code>UpdateDate</code> - A date when this message has been updated enough to re-show it to the user. For example, if you make significant changes to the message and want to forcibly re-trigger it for all users, set this to the current date, and anyone who hasn't viewed or dismissed the message since that date will be re-prompted</li> <li><code>DismissOnButtonOnly</code> - A boolean indicating whether the welcome message should only be closed by users clicking the dismiss button at the bottom, rather than the close button in the top or by clicking outside of the popup</li> <li><code>DismissText</code> - An optional string for the text that will appear in the dismiss button. Leave blank for default of 'Close'</li> <li><code>ModalSize</code> - A string to choose the size of the modal for the welcome message. Default is 'modal-lg' but you can use 'modal-fullscreen' if you want a larger message</li> </ul> <p>Hint</p> <p>Setting <code>DismissOnButtonOnly</code> to <code>true</code> along with a <code>Frequency</code> of <code>0</code> or <code>1</code>, a custom <code>DismissText</code> and <code>ModalSize</code> of <code>modal-fullscreen</code> can work as a reasonable alternative to a standard 'Agree to our terms' screen. For user experience reasons, try not to do this too much if you don't need to</p>"},{"location":"db/welcome-messages/#versions","title":"Versions","text":"<p>Within the <code>Versions</code> table, there is an optional <code>WelcomeMessageId</code> column. Set this to the <code>Id</code> in the <code>WelcomeMessages</code> table of the relevant welcome message you want the version to have.  Set to null for no welcome message.</p> <p>Warning</p> <p>This feature relies on <code>localStorage</code>, a browser feature that allows us to store small amounts of data on the users browser. Some users or organisation may disable <code>localStorage</code>, in which case the welcome message will always trigger, regardless of the frequency setting</p>"},{"location":"gui/attributions/","title":"Attributions","text":"<p>All layers have an attribution, which appears at the bottom of the map and details basic copyright and licence information. We keep these in a database rather than relying on fetching metadata from the layer source for two main reasons:</p> <ul> <li>Speed - retrieving individual attribution information from every layer is dependent on the speed of the web server, so can be slow</li> <li>Availability - from experience, many services simply do not provide attribution information or it is wrong. Some types of layer (such as XYZ layers) do not even have this capability</li> </ul>"},{"location":"gui/attributions/#add-a-new-attribution","title":"Add a new attribution","text":"<p>Select the Add new attribution button and fill in the details:</p> <ul> <li>Name - a friendly name for the attribution used by admins</li> <li>Attribution HTML - the HTML used to display the attribution. Can be written in plain text, but if you need links you'll need to use HTML for that. Use the placeholder <code>{{CURRENT_YEAR}}</code> to inject the current year into the string</li> </ul> <p>Example</p> <p><code>Copyright &lt;a href=\"https://www.dorsetcouncil.gov.uk\" target=\"blank\"&gt;Dorset Council&lt;/a&gt; {{CURRENT_YEAR}}.</code></p> <p>Renders as </p> <p>Copyright Dorset Council 2023.</p>"},{"location":"gui/attributions/#edit-an-attribution","title":"Edit an attribution","text":"<p>Select the attribution you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/attributions/#delete-an-attribution","title":"Delete an attribution","text":"<p>Select the attribution you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/basemaps/","title":"Basemaps","text":"<p>All versions have one or more basemaps (sometimes referred to as background maps). A basemap is made up of a layer source and a basemap definition.</p>"},{"location":"gui/basemaps/#creating-the-layer-source","title":"Creating the layer source","text":"<p>A basemap first requires a layer source to be created that defines where the layer comes from.</p> <p>The easiest way to create a layer source and then a basemap is to use the layer wizard. This will take you through the steps to create a layer source and then present you with the basemap configuration interface.</p>"},{"location":"gui/basemaps/#configuring-a-basemap","title":"Configuring a basemap","text":"<p>A basemap is similar to a layer, but with a few less options.</p> <ul> <li>Name: The friendly name for the basemap</li> <li>Minimum viewable zoom level: This is the furthest zoomed out this basemap can be rendered at. This will restrict the map from being zoomed out any further than this</li> <li>Maximum viewable zoom level: This is the furthest zoomed in this basemap can be rendered at. This will restrict the map from being zoomed in any further than this</li> <li>Preview image URL: A URL to a preview image that will appear in the basemaps panel. This can be any valid image file. We recommend it be around 800x200 pixels</li> <li>Max bounds: The maximum extent that this basemap should render to. Can be used to prevent basemaps being shown outside of your area of interest</li> </ul> <p>Once created, the basemap can be added to versions just like any other.</p>"},{"location":"gui/bounds/","title":"Bounds","text":"<p>Bounds are the geographic bounding box definitions that can be applied to layers or used as starting bounds in versions. The coordinates are defined in Spherical Mercator EPSG:3857.</p>"},{"location":"gui/bounds/#add-a-new-bound","title":"Add a new bound","text":"<p>Select the Add new bound button and fill in the details:</p> <ul> <li>Name</li> <li>Description</li> <li>Each of the bound coordinates</li> </ul>"},{"location":"gui/bounds/#edit-a-bound","title":"Edit a bound","text":"<p>Select the bound you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/bounds/#delete-a-bound","title":"Delete a bound","text":"<p>Select the bound you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/broadcast/","title":"Broadcast","text":"<p>Use the broadcaster to instantly broadcast a message to all users. This should be used sparingly.</p> <ul> <li>Message type - choose either <ul> <li>Toast - message appears in the bottom left corner </li> <li>Popup - message appears as a popup in the centre of the screen</li> </ul> </li> <li>Message severity - pick the relevent one</li> <li>Message - enter your message here, keep it short and clear</li> <li>Broadcast to version - choose which version of GIFramework Maps you want the broadcast to appear on</li> </ul>"},{"location":"gui/getting-started/","title":"Getting started with the management interface","text":"<p>As an admin, you have access to the managment interface for GIFramework Maps. This is where you can configure the application, including adding new layers, creating new colour themes, adding tours and more.</p> <p>When you log in, you should see an option for Manage application underneath your username. This will take you to the management interface.</p> <p> </p> The management interface for GIFramework Maps"},{"location":"gui/layers/","title":"Layers","text":"<p>Layers are the bedrock of GIFramework Maps. Without layers, your maps are basically useless.</p> <p>Layers are pretty configurable, and have lots of various options.</p> <p>There are three parts to creating a layer: layer sources, layer details and layer categories.</p> <p>You can manually create a layer, or use the wizard. We highly recommend you use the wizard, even if you have to make changes to what it generates, as it reduces the chance of getting anything wrong.</p>"},{"location":"gui/layers/#add-a-new-layer-using-the-wizard","title":"Add a new layer using the wizard","text":"<p>Using the wizard is the most straightforward way to get a layer into your map. Choose the 'Add Layer Wizard' option from the Layers management page.</p> <p>You will have two options, WMS/WFS and XYZ/TMS.  </p>"},{"location":"gui/layers/#add-a-layer-from-a-wms-or-wfs-service","title":"Add a layer from a WMS or WFS service","text":"<p>You can choose from the list of pre-defined web service definitions, or enter a GetCapabilities URL to retrieve a list of layers.</p> <p>Once you've found the layer you want to add, check the projection and format and change them if necessary, and then hit Add. </p> <p>You will be taken to a page to check and update the details if necessary. Most of the details should have been pre-filled for you.</p> <ul> <li>Name - a friendly name for administrators. This is automatically taken from the Title of the WMS layer if available</li> <li>Description - a basic description of the layer. This is shown to end users when the layer has no other description metadata available from source. This is automatically taken from the Abstract of the WMS layer if available</li> <li>Layer type - choose the type. This will default to TileWMS for WMS, or Vector for WFS. These are normally the right options, but you can change this depending on your requirements. Check the help documentation on Layer types for more information</li> <li>Attribution - the attribution you want your layer to use. If the service provided an attribution string, the system will attempt to find the best match in your list of attributions and pre-select it. This can generate false positives, and often services do not provide an attribution string, so you'll need to check this and set it yourself.</li> <li>Projection - The projection of the data you will be requesting. If you selected 'auto' on the previous screen, this will be blank. If its blank, the layer will automatically request data in the projection of the map its within. See Auto Projection below for more information.</li> </ul> <p>There is a collapsible section for 'Advanced settings'. You should generally leave this alone as it contains details that will be used behind the scenes to make your layer work. However, you can edit them if you need to.</p> <ul> <li>Base URL - This should be set to the 'base' url of the WMS service. This is normally provided to you by the service, and will look something like <code>https://&lt;service-url&gt;/wms</code></li> <li>Layer Name - This is the name of the layer in the web service, not the name that users will see. This name will be used by OpenLayers to make appropriate requests to the service.</li> <li>Format - The image format that will be used. This was available to select from the previous screen, so if you want something different, you should go back and select from the list.</li> <li>Version - The WMS version you will be using. This will generally be 1.1.0 or 1.3.0 and will have been selected for you, but you can override it here if you know what you are doing.</li> <li>Require use of proxy? - Indicates whether this layer source requires the proxy. Will have been pre-selected for you based on your choices on the previous screen.</li> </ul> <p>Limitation</p> <p>Vectors cannot currently have a filter pre-applied to them. Users can apply filters to WFS based layers manually.</p>"},{"location":"gui/layers/#styling-vector-layers","title":"Styling Vector layers","text":"<p>Warning</p> <p>This functionality is still in the early stages and there may be bugs and other issues. Use with caution.</p> <p>Vector layers work differently from WMS based layers. With vector data, styling is done on the client, so you need to provide styling rules to the application to tell it how to style a layer, otherwise you will get the OpenLayers defaults of blue dots/lines/polygons.</p> <p>Note</p> <p>KML layers work a little different. They can have styling information built in, so if you don't provide a style rule, it will use that. </p> <p>Styling rules can either be provided as a URL or as a full JSON object, either in GeoStyler style format, Mapbox style format, or as an OpenLayers flat style. The easiest thing to do is to use the GeoStyler demo page and add your data (or a sample of it) and use the UI to style it how you want, or to import an SLD from GeoServer or QGIS into the GeoStyler demo, and convert it to GeoStyler style format.</p>"},{"location":"gui/layers/#auto-projection","title":"Auto Projection","text":"<p>GIFramework Maps will automatically request data in the projection of the map it is within unless you specifically set a projection. Auto projection is ideal in most cases where the server the data is coming from is able to handle the projections you want. However, if the server hosting the source data does not handle the projection of the map, you will need to explicitly set the projection on the layer source. GIFramework Maps will then handle the reprojection required to display it properly. If you aren't sure, set the projection to one advertised by the server as compatible. </p>"},{"location":"gui/layers/#add-a-layer-from-an-xyztms-template","title":"Add a layer from an XYZ/TMS template","text":"<p>You can enter an XYZ/TMS URL template to create a layer.</p> <p>This follows the widely-used Google grid where x 0 and y 0 are in the top left. Grids like TMS where x 0 and y 0 are in the bottom left can be used by using the {-y} placeholder in the URL template, so long as the source does not have a custom tile grid.</p> <p>Must include <code>{x}</code>, <code>{y}</code> or <code>{-y}</code>, and <code>{z}</code> placeholders. A <code>{?-?}</code> template pattern, for example subdomain{a-f}.domain.com, may be used to split traffic across multiple domains.</p> <p>Example</p> <p>For the OpenStreetMap tile server, you would use</p> <p><code>https://tile.openstreetmap.org/{z}/{x}/{y}.png</code></p> <p>This is just an example. Do not use the OpenStreetMap tile server for heavy workloads.</p> <p>When you hit 'Create XYZ source' you will be taken to a page to check and update the details if necessary. </p> <ul> <li>Name - a friendly name for administrators</li> <li>Description - a basic description of the layer</li> <li>Attribution - the attribution you want your layer to use</li> </ul> <p>There is a collapsible section for 'Advanced settings'. You should generally leave this alone as it contains details that will be used behind the scenes to make your layer work. However, you can edit them if you need to.</p> <ul> <li>URL Template - This is what you entered on the previous screen. If you made a mistake you can update it here.</li> <li>Projection - If the layer is NOT in the standard EPSG:3857, you can put an alternative projection here. You will also need to enter a custom tile grid.</li> <li>Custom tile grid - To make use of on the fly reprojection, you need to provide an appropriate custom tile grid, describing the resolutions and origins of the XYZ layer. The service provider should be able to provide this. It will be a simple JSON object</li> <li>Minimum source zoom level (optional) - the minimum published zoom level this source has available. Setting these options allows you to make use of over and under-zooming the source. Leave blank for no minimum</li> <li>Maximum source zoom level (optional) - the maximum published zoom level this source has available. Setting these options allows you to make use of over and under-zooming the source. Leave blank for no maximum</li> </ul> <p>Example</p> <p>The custom tile grid for British National Grid EPSG:27700 is <pre><code>{\n    \"resolutions\": [896.0, 448.0, 224.0, 112.0, 56.0, 28.0, 14.0, 7.0, 3.5, 1.75],\n    \"origin\": [-238375.0, 1376256.0]\n}\n</code></pre></p> <p>Over and under-zooming</p> <p>By setting a max source zoom level, you tell the map not to request tiles for anything beyond this level. You can then set the max zoom level on the layer itself to be a higher number, and the layer will still be visible, but won't request new tiles, instead it will just zoom in. This is great for layers where you want people to see beyond the level that is published by the server. Use with care, as too much over-zooming will degrade the quality, and too much under-zooming will make the map unreadable.</p>"},{"location":"gui/layers/#adding-non-wfs-based-vector-layers","title":"Adding non-WFS based vector layers","text":"<p>GIFramework Maps can also render vector layers from a non-WFS source, such as a KML or GeoJSON file on a web server or a non OGC API that is capable of producing valid GeoJSON. This cannot be done using the layer wizard, and must be manually added by creating a layer source with the appropriate parameters. Check the documentation on adding a layer manually for more details.</p>"},{"location":"gui/layers/#the-layer-details-screen","title":"The layer details screen","text":"<p>When you've created a source, or if you are editing an existing layer, you will see the layer details screen.</p> <ul> <li>Name</li> <li>Minimum viewable zoom level (optional) - the minimum zoom this layer will be turned on for, for example if set to 12, the layer will turn off once you zoom out past level 12</li> <li>Maximum viewable zoom level (optional) - the maximum zoom this layer will be turned on for, for example if set to 15, the layer will turn off once you zoom in past level 15. Set to blank for no restriction</li> <li>Layer Z-Index - this is the 'layer order' on the map. Higher numbers will, by default, appear above lower numbers when both layers are turned on. For things like Aerial Photography, this should generally be set very low (such as -500). Leave blank for default of 0</li> <li>Info List Template - the template for what appears when you click multiple items and are presented with a list of features. See Info Templates below for more information</li> <li>Info Template - the template for what appears when you select a single map feature. See Info Templates below for more information</li> <li>Queryable - whether you want the layer to be queryable (clicking on a feature will display further information)</li> <li>Filterable - whether you want the layer to be filterable</li> </ul> <p>Note</p> <p>If you are creating a layer for an XYZ/TMS source, some options will not be available</p> <p>You'll also see a button for Advanced settings, which are optional.</p> <ul> <li>Restricted bounds (optional) - The maximum bounds this layer covers. This will restrict map rendering and querying outside of these bounds, which can improve performance and prevent areas you don't want shown from appearing.</li> <li>Default Opacity - The opacity (transparency) of the layer when you first turn it on. Users can override this value.</li> <li>Default Saturation - The saturation of the layer when you first turn it on. Users can override this value.</li> <li>Default filter is editable - Whether any default filters applied to the layer source are editable by end users.</li> <li>Proxy Map Requests - Whether GetMap requests should go via the Proxy</li> <li>Proxy Map Requests - Whether Feature Info and other metadata requests should go via the Proxy</li> </ul>"},{"location":"gui/layers/#info-templates","title":"Info Templates","text":"<p>Info templates control how the user see's data when they click an item on the map. Templates are a powerful feature that allows you to convert the unfriendly attribute based tables returned from a service into friendly, human readable popups. There are two info templates used by GIFramework Maps. </p> <ul> <li>Info Template - The template for what appears when you select a single map feature</li> </ul> <p> </p> An Info Template for a single map feature. Mapping \u00a9 Crown Copyright OS. <ul> <li>Info List Template - The template for what appears when you select multiple map features and are presented with a list of features</li> </ul> <p> </p> An Info List Template for multiple features. Mapping \u00a9 Crown Copyright OS. <p>The templates use a system called nunjucks for templating. You can read their documentation or the section below for advanced uses. For basic uses, you simply write standard HTML, and use the placeholder <code>{{COLUMN_NAME}}</code> to inject attributes into the template.</p> <p>Example</p> <p>Template (assuming there are attributes called <code>ADDRESS</code> and <code>UPRN</code>):</p> <p><code>&lt;h1&gt;{{ADDRESS}}&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;UPRN:&lt;/strong&gt; {{UPRN}}&lt;/p&gt;</code></p> <p>Output:</p> <p><code>&lt;h1&gt;1 Somewhere Drive, Someplace, SM1 1AA&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;UPRN: &lt;/strong&gt; 10010101001&lt;/p&gt;</code></p> <p>Info List Templates are simpler, and are designed for a single line of text with placeholders. It still uses nunjucks and the placeholder <code>{{COLUMN_NAME}}</code>, but should be kept simple as there may be many results listed. </p> <p>Warning</p> <p>Avoid using HTML in an info list template. The template is injected into an <code>&lt;a&gt;</code> tag within a <code>&lt;li&gt;</code> tag, so adding further HTML may cause unexpected results.</p> <p>Example</p> <p>Template (assuming there is an attribute called <code>ADDRESS</code>):</p> <p><code>Address: {{ADDRESS}}</code></p> <p>Output:</p> <ul> <li><code>Address: 1 Somewhere Drive, Someplace, SM1 1AA</code></li> <li><code>Address: 2 Somewhere Drive, Someplace, SM1 1AA</code></li> <li><code>Address: 3 Somewhere Drive, Someplace, SM1 1AA</code></li> </ul> <p>The admin interface has template helpers for the Info List Template and Info Template. These helpers allow you to build your template with HTML tags and appropriate attributes.</p> <ul> <li>HTML tags (Info Templates only) - Gives you all the basic opening and closing tags for headers, paragraphs, basic styling and images. See the MDN docs on HTML basics to learn more.</li> <li>Attributes - Gives you a list of all the attributes available in the layer source you selected. Clicking them will insert that attribute into the template, surrounded by curly braces. In some instance we may not be able to get the attributes from the service. This can often be a warning that the service will not be queryable, so you will need to check. In these cases you will get a warning and will have to write your template manually. </li> <li>Date formatting - Gives you some helpers to insert date formatting strings. See date formatting below for more detail.</li> <li>Preview - The preview will show you how your template will be rendered by grabbing a real feature from the service and rendering your template. In some instance we may not be able to get a feature from the service, so the preview won't work.</li> </ul>"},{"location":"gui/layers/#advanced-templating","title":"Advanced templating","text":"<p>There are a number of advanced features built into the templating engine to allow for some smart customisation.</p>"},{"location":"gui/layers/#date-formatting","title":"Date formatting","text":"<p>You can apply custom date formatting to datetime attributes to make them more user friendly.</p> <p>Warning</p> <p>This is a custom extension to nunjucks and not part of the standard nunjucks templating engine</p> <p>To apply basic datetime formatting, simply add <code>| date</code> after your attribute name. For example <code>{{DATE_ATTRIBUTE | date}}</code> will attempt to render the attribute <code>DATE_ATTRIBUTE</code> using the <code>toLocaleDateString()</code> JavaScript function. In <code>en-GB</code> locales this would convert the ISO date <code>2023-02-07T17:10:00.000Z</code> to <code>07/02/2023</code>.</p> <p>You can also apply custom formatting by passing a <code>format</code> string to the <code>date</code> function. For example <code>{{DATE_ATTRIBUTE | date('yyyy')}}</code> will convert the ISO date <code>2023-02-07T17:10:00.000Z</code> to <code>2023</code>. This custom formatting is applied using a library called luxon, who provide a table of tokens you can use.</p> <p>Examples</p> <p>Assuming an attribute called <code>DATE_ATTRIBUTE</code> with the value <code>2023-02-07T17:10:00.000Z</code> (Feb 7th, 2023 at 17:10)</p> <ul> <li><code>{{DATE_ATTRIBUTE | date}}</code> <code>07/02/2023</code> (assuming <code>en-GB</code> locale, will be different depending on users locale)</li> <li><code>{{DATE_ATTRIBUTE | date('yyyy')}}</code> <code>2023</code></li> <li><code>{{DATE_ATTRIBUTE | date('ccc dd LLLL yyyy T')}}</code> <code>Tuesday 07 February 2023 17:10</code></li> </ul>"},{"location":"gui/layers/#conditionals","title":"Conditionals","text":"<p>You can use basic if statements to conditionally show/hide content in a template or render it in a different way. </p> <p>Info</p> <p>You can read the full documentation on if statements in nunjucks in their documentation</p> <p>If statements are very simple and flexible. A basic example is <pre><code>{% if attribute === 'something' %}\n  It is something\n{% endif %}\n</code></pre> This will render the string 'It is something' if the <code>attribute</code> is equal to 'something'. Everything between the tags can include placeholders and HTML as normal. </p> <p>For example, the following will wrap the <code>STATUS</code> attribute in a <code>&lt;span&gt;</code> with the class <code>text-danger</code> (rendering it as red text) if the <code>STATUS</code> is 'Closed', otherwise it will not wrap it in anything. <pre><code>{% if STATUS === 'Closed' %}\n    &lt;span class=\"text-danger\"&gt;{{STATUS}}&lt;/span&gt;\n{% else %}\n    {{STATUS}}\n{% endif %}\n</code></pre></p>"},{"location":"gui/layers/#everything-else","title":"Everything else","text":"<p>There are many more helpers available. The best way to find out more is to read the nunjucks templating documentation.</p> <p>Some useful ones you might consider:</p> <ul> <li>Math - Perform simple math operations</li> <li>capitalize - Make the first letter uppercase, the rest lower case</li> <li>int - Convert the value into an integer. If the conversion fails 0 is returned.</li> <li>lower - Convert string to all lower case</li> <li>round - Round a number</li> <li>truncate - Return a truncated copy of the string</li> <li>upper - Convert the string to upper case</li> </ul>"},{"location":"gui/layers/#add-a-new-layer-manually","title":"Add a new layer manually","text":"<p>You can create a layer manually by</p> <ol> <li>Creating a Layer Source</li> <li>Adding the relevant Layer Source Options</li> <li>Adding a layer</li> <li>Adding it to a category</li> </ol> <p>Warning</p> <p>We strongly suggest you use the wizard, even if you use it just to create the basics, then edit it as you need. Creating a layer source incorrectly can result in your entire map not loading correctly.</p>"},{"location":"gui/layers/#layer-sources","title":"Layer sources","text":"<p>This section covers where your layers come from. Select Add new layer source and fill in the details:</p> <ul> <li>Name - a friendly name for administrators</li> <li>Description - a basic description of the layer. This is shown to end users when the layer has no other description metadata available from source</li> <li>Layer type - choose the type</li> <li>Attribution - the attribution you want your layer to use</li> </ul> <p>Tick the Create layer source option on save box to automatically fill in details that will appear on the right side of the screen. You can edit these manually if you need to, but you will need to know what you are doing. For more detailed information on these options, see database layers.</p>"},{"location":"gui/layers/#layer-details","title":"Layer details","text":"<p>This section is where you add in the details for your layers. Select Add new layer, you will be prompted to pick a layer source from the list. Fill in the details:</p> <ul> <li>Name</li> <li>Minimum viewable zoom level (optional) - the minimum zoom this layer will be turned on for, for example if set to 12, the layer will turn off once you zoom out past level 12</li> <li>Maximum viewable zoom level (optional) - the maximum zoom this layer will be turned on for, for example if set to 15, the layer will turn off once you zoom in past level 15. Set to blank for no restriction</li> <li>Layer Z-Index - this is the 'layer order' on the map. Higher numbers will, by default, appear above lower numbers when both layers are turned on. For things like Aerial Photography, this should generally be set very low (such as -500). Leave blank for default of 0</li> <li>Info List Template - the template for what appears when you click multiple items and are presented with a list of features. See Info Templates for more information</li> <li>Info Template - the template for what appears when you select a single map feature. See Info Templates for more information</li> <li>Queryable - whether you want the layer to be queryable (clicking on a feature will display further information)</li> <li>Filterable - whether you want the layer to be filterable</li> </ul> <p>You'll also see a button for Advanced settings, which are optional.</p> <ul> <li>Disclaimer: The disclaimer to show when this layer is turned on. See Layer Disclaimers.</li> <li>Restricted bounds: Allows you to prevent a layer from being rendered or query outside of the defined bounds</li> <li>Opacity/Saturation: Set the default starting opacity and saturation of this layer. Can be overridden by Layer Customisations or via the URL permalink</li> <li>Default filter is editable: If a layer has a filter applied to it via a CQL_FILTER, ticking this box allows users to edit that filter. By default, that filter will be 'locked' and can't be edited by users</li> <li>Proxy Map Requests: Allows you to get round server CORS issues by proxying the requests via the in-built proxy server</li> <li>Proxy Metadata Requests: Allows you to get round server CORS issues by proxying the requests via the in-built proxy server</li> <li>Refresh interval (seconds): Set how often this layer will automatically refresh data from the server without user intervention. </li> </ul>"},{"location":"gui/layers/#layer-categories","title":"Layer categories","text":"<p>This section is where you manage the categories that layers are organised into. Select Create new category and fill in the details:</p> <ul> <li>Name</li> <li>Description</li> <li>Order - the sort order you want your category to appear</li> <li>Parent category (optional) - select a parent category if the category you are creating is a child category</li> </ul> <p>On the right side of the screen, you'll be able to select all the layers you want to appear in your category.</p>"},{"location":"gui/layers/#edit-a-layer","title":"Edit a layer","text":"<p>Select the section then layer you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/layers/#delete-a-layer","title":"Delete a layer","text":"<p>Select the section then layer you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/layers/#layer-disclaimers","title":"Layer Disclaimers","text":"<p>You can add popup disclaimers to your layers that show when a user turns on a layer. The first step is to add a new disclaimer with the details you need.</p> <ul> <li>Name: A friendly name for administrators</li> <li>Disclaimer: The disclaimer to show. This can be plain text or HTML</li> <li>Frequency: How often you want the disclaimer to show. The options are:</li> <li>Just once: Will only show once in that browser</li> <li>Always (once per session): Will show a maximum of once per browsing session. Refreshes do not count as a new session, but new tabs do. This prevents users from constantly being bombarded with the message every time they turn the layer on/off</li> <li>Once a (day/week/month etc.): Shows once per period shown</li> <li>Dismiss Text: Optional text to show on the dismiss button. Defaults to 'Close' if you leave it blank</li> </ul> <p>Once you've created the disclaimer, you can go to your layer and set the disclaimer in the Advanced settings of the layer.</p> <p>Disclaimers work using the browsers localStorage and sessionStorage. If a user changes browser, or clears their localStorage, they will see the disclaimer again.</p> <p>Tip</p> <p>Multiple layers can share the same disclaimer. This not only saves you from having to write multiple similar disclaimers, it also allows you to 'bundle' disclaimers together, so if you have a bunch of layers that all need the same disclaimer, the user will only see the warning once, not for every layer they click</p> <p>Limitations</p> <p>If a layer is already turned on (either through layer customisations or via a share link) the disclaimer will not trigger unless the user turns the layer off and back on. This is to prevent being potentially bombarded with disclaimers on first load. </p>"},{"location":"gui/search-definitions/","title":"Search definitions","text":"<p>Search definitions define what searches are available in the search bar and how they work.</p>"},{"location":"gui/search-definitions/#add-a-new-search-definition","title":"Add a new search definition","text":"<p>There are three different types of search definition: API search definitions, database search definitions and local search definitions.</p> <p>To add a new search definition, select the Add new button for the type you want to add. All three search definitions will ask you for the following details:</p> <ul> <li>Name - a friendly name for administrators</li> <li>Title - the name that will appear in the search results list</li> <li>Attribution HTML - optional HTML to add to the bottom of the search results as an attribution</li> <li>Maximum number of results to return</li> <li>Zoom level you want the map to zoom to (optional)</li> <li>ESPG - the EPSG code of the geometry returned</li> <li>Regex validation (leave this blank for no validation) - an optional Regular Expression to validate the search query against. If a search query doesn't match the regualr expression, it won't even be attempted</li> <li>Supress geometry - ticking this prevents a pin, line or polygon from being drawn on the map when a user clicks on a search result</li> </ul>"},{"location":"gui/search-definitions/#api-search-definitions","title":"API search definitions","text":"<p>If you're creating an API search definition, you will also be asked to fill in the following details:</p> <ul> <li>URL template -  the full URL to do the search, with the placeholder {{search}} where the search query would go</li> <li>Title field path - a JSONPath expression to an appropriate 'Title' field, used for displaying the search result</li> </ul> <p>Plus one of the following:</p> <ul> <li>X and Y field paths -  a JSONPath expression to an appropriate 'X' or 'Y' field in the JSON</li> <li>Geometry path - a JSONPath expression to appopriate 'Geometry' field. The geometry must be valid GeoJSON</li> <li>Bounding rectangle fields - a JSONPath expression to a minimum bounding rectangle field</li> </ul>"},{"location":"gui/search-definitions/#database-search-definitions","title":"Database search definitions","text":"<p>If you're creating a database search definition, you will also be asked to fill in the following details:</p> <ul> <li>Table name - the fully qualified name of the table to query</li> <li>X field - the name of an appropriate 'X' column in the table</li> <li>Y field - the name of an appropriate 'Y' column in the table</li> <li>Geometry field - the name of an appopriate GeoJSON geometry column in the table. You may need to use a database function to convert the geometry to GeoJSON</li> <li>Title field - the name of an appropriate 'Title' field, used for displaying the search result</li> <li>SQL WHERE clause - the WHERE clause used to do the actual search, with the placeholder {{search}} where the search query would go</li> <li>SQL ORDER BY clause (optional)</li> </ul>"},{"location":"gui/search-definitions/#local-search-definitions","title":"Local search definitions","text":"<p>Local search definitions are a bit different. They are hard-coded into the application, so if you enter one of these you need to know what you are doing.</p> <ul> <li>Local search name - the hard-coded name in the application</li> </ul>"},{"location":"gui/search-definitions/#edit-a-search-definition","title":"Edit a search definition","text":"<p>Select the search definition you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/search-definitions/#delete-a-search-definition","title":"Delete a search definition","text":"<p>Select the search definition you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/system/","title":"System","text":""},{"location":"gui/system/#cache","title":"Cache","text":"<p>You can clear the cache in the System section. Click the big red button to clear the in memory cache for the application.</p> <p>Most of the data is cached for varying amounts of time, to improve performance.</p>"},{"location":"gui/system/#cached-items","title":"Cached items","text":"Name Key Cache length Version Configuration by Slug VersionBySlug/{slug} 10 minutes Version Configuration by ID Version/{id} 10 minutes User Roles by User ID UserRole/{userId} 2 minutes Web Layer Service Definitions WebLayerServiceDefinitions 10 minutes Proxy Allowed Hosts ProxyAllowedHosts 12 hours Print Configuration by Version PrintConfigurationByVersion/{versionId} 10 minutes Search Definitions by Version SearchDefinitions/{versionId} 10 minutes API Search Definitions APISearchDefinitions 1 hour Database Search Definitions DBSearchDefinitions 1 hour Local Search Definitions LocalSearchDefinitions 1 hour"},{"location":"gui/system/#web-layer-service-definitions","title":"Web layer service definitions","text":"<p>Web layer service definitions detail pre-defined services that users can add layers from onto their map, and that Admins can choose to add layers from in the Add Layer wizard. These services are defined just once for all versions.</p>"},{"location":"gui/system/#add-a-new-web-layer-service-definition","title":"Add a new web layer service definition","text":"<p>Select Manage web layer service definitions then Add new web layer service definition and fill in the details:</p> <ul> <li>Name - a friendly name for the service shown to end users</li> <li>Description - a more detailed description for the service if you need one</li> <li>URL - the base URL for the service</li> <li>Type - the type of service. Currently only WMS is supported</li> <li>Version - the version of the service. Leave blank and it will use version 1.1.0</li> <li>Category - a category to group the list by. All services with the same category will be grouped in the select list presented to users</li> <li>Whether you want to enable proxy map requests - only tick this if the layer can't be used with CORS</li> <li>Whether you want to enable proxy metadata requests - only tick this if the layer can't be used with CORS</li> <li>Available to Admins only? - makes this service only visible to administrators on the map and in the Add Layer wizard</li> </ul> <p>Warning</p> <p>Proxying requests can reduce performance and may even be blocked by the service provider. If in doubt, check with the service provider. </p>"},{"location":"gui/system/#edit-a-web-layer-service-definition","title":"Edit a web layer service definition","text":"<p>Select the web layer service definition you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/system/#delete-a-web-layer-service-definition","title":"Delete a web layer service definition","text":"<p>Select the web layer service definition you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/system/#site-analytics-and-cookie-control","title":"Site analytics and cookie control","text":"<p>You can configure from a number of supported analytics tools including the ability to enable associated cookie controls. </p>"},{"location":"gui/system/#add-a-new-analytics-tool","title":"Add a new analytics tool","text":"<p>Select Site analytics and cookie control then Add a new analytics tracker and fill in the details:</p> <ul> <li>Select from the supported tool list</li> <li>Add the token or key provided by the supplier</li> <li>Select any associated cookie control (currently only Civica supported)</li> <li>Check the box if you wish to enable it right away</li> <li>Finally, select which versions you want to apply the tool to if required. </li> </ul> <p>Note</p> <p>If you don't select any versions the analytics tool will be applied to all of the versions. </p>"},{"location":"gui/system/#edit-an-analytics-tool","title":"Edit an analytics tool","text":"<p>Select the tool you wish to edit from the tool list by product name. Make the changes you want and hit Save.</p>"},{"location":"gui/system/#delete-an-analytics-tool","title":"Delete an analytics tool","text":"<p>Select the Remove link on the right of the tool list. This will remove your analytics entry. </p>"},{"location":"gui/system/#projections","title":"Projections","text":"<p>GIFramework Maps can use multiple projections for both the actual map rendering and the display coordinates. The Projections section lets you manage what projections are available.</p>"},{"location":"gui/system/#register-new-projection","title":"Register new projection","text":"<p>To add a new projection to the list of available projections, choose 'Register new projection'. See Getting projection details below to find out how to get the information you need.</p> <ul> <li><code>EPSG Code</code> - The EPSG code of the projection</li> <li><code>Name</code> - The name of the projection</li> <li><code>Description</code> - A description of what this projection is and where it covers</li> <li><code>Proj4 or WKT Definition</code> - A Proj4 or WKT definition of the projection</li> <li><code>Bottom Left X (Min X)</code> - The bottom left X coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>Bottom Left Y (Min Y)</code> - The bottom left Y coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>Top Right X (Max X)</code> - The top right X coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>Top Right Y (Max Y)</code> - The top right Y coordinate of this projections maximum bounds, in Lat/Lon</li> <li><code>Default display decimal places</code> - The number of decimal places shown by default when showing coordinates in this projection</li> </ul>"},{"location":"gui/system/#edit-a-projection","title":"Edit a projection","text":"<p>Select the projection you want to edit from the list. Make the changes you want and hit Save.</p> <p>Warning</p> <p>Be careful editing projections, as these can have a dramatic effect on the application</p>"},{"location":"gui/system/#delete-a-projection","title":"Delete a projection","text":"<p>Select the projection you want to delete from the list. At the bottom, hit Delete and confirm your choice.</p> <p>Danger</p> <p>Make sure your projection is not being used anywhere before deleting it</p>"},{"location":"gui/system/#getting-projection-details","title":"Getting projection details","text":"<p>Projections are defined using the EPSG Code, Proj4Definition and bounds. You can get these using websites such as https://epsg.io or https://epsg.org/. You can use a Proj4 or WKT style definition for the projection definition. You do not have to provide a definition for the built-in projections.</p>"},{"location":"gui/system/#built-in-projections","title":"Built-in projections","text":"<p>The following projections are built-in, and do not require a Proj4 or WKT definition. </p> <ul> <li>EPSG:3857 - Spherical Mercator</li> <li>EPSG:4326 - WGS84 Lat/Lon</li> <li>EPSG:4269 - NAD83 (North America)</li> </ul> <p>You will still need to add the projection to the list to make it available to the application.</p>"},{"location":"gui/themes/","title":"Themes","text":"<p>Each version of GIFramework Maps can have its own theme, which includes changing the main theme colour.</p>"},{"location":"gui/themes/#add-a-new-theme","title":"Add a new theme","text":"<p>Select the Add new theme button and fill in the details:</p> <ul> <li>Name</li> <li>Description</li> <li>The theme colour</li> <li>URL for a logo</li> <li>URL for custom favicons (optional). Favicons are the small icons that appear next to the name of a website in your browser tab</li> </ul>"},{"location":"gui/themes/#edit-a-theme","title":"Edit a theme","text":"<p>Select the theme you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/themes/#delete-a-theme","title":"Delete a theme","text":"<p>Select the theme you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/tours/","title":"Tours","text":"<p>Tours are used to give users a quick overview of the features of GIFramework Maps. Tours are highly configurable, and different tours can be applied to specific versions.</p>"},{"location":"gui/tours/#add-a-new-tour","title":"Add a new tour","text":"<p>Select Create new tour and fill in the details:</p> <ul> <li>Name of your tour</li> <li>How often you want the tour to display</li> <li>Update date - a date when the tour has been updated enough to reshow it to users</li> </ul> <p>Once you've created a tour, you can start adding individual steps. To do this, either tick the Add step on save box when you're creating your tour - or create your tour, click on it again and you'll see an option to create tour steps on the right.</p> <p>When you're creating a tour step, you'll need to fill in the following:</p> <ul> <li>Title - this text will appear in bold at the top of the tour step</li> <li>Content - what you want your step to say. You should include HTML markup for links and also <code>target=\"_blank\"</code> as this will make sure the link opens in a new window </li> </ul> <p>Example</p> <p><code>&lt;a href=\"https://gi-staging.dorsetcouncil.gov.uk/dorsetexplorerdocs\" target=\"_blank\"&gt;Help pages&lt;/a&gt;.</code></p> <ul> <li>Name of the selector you want the tour step to attach to (include the '.'), if you leave this blank the tour step will float in the middle of the screen</li> </ul> <p>Example</p> <p><code>.sidebar-button-share</code> or <code>.search-control</code></p> <ul> <li>Where on the selector you want the tour step to attach (if you've chosen one)</li> <li>Step order - this number will start at 1 and increase as you add more steps. If you want to alter the order that the steps appear, change this number</li> </ul>"},{"location":"gui/tours/#edit-a-tour","title":"Edit a tour","text":"<p>Select the tour or step you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/tours/#delete-a-tour","title":"Delete a tour","text":"<p>Select the tour or step you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/users/","title":"Users","text":"<p>Users create themselves when they sign up and are managed through the external identity provider. You are unable to create or delete users directly in GIFramework Maps.</p> <p>As an admin, you can edit user permissions and which versions users have access to.</p>"},{"location":"gui/users/#change-user-permissions","title":"Change user permissions","text":"<p>Find the user in the list and select them. In the Assigned roles box, select the permissions you want to grant to the user and press Save.</p>"},{"location":"gui/users/#update-which-versions-a-user-has-access-to","title":"Update which versions a user has access to","text":"<p>Find the user in the list and select them. In the Versions section, choose the versions you want the user to have access to and press Save.</p>"},{"location":"gui/versions/","title":"Versions","text":"<p>Versions are the best way to split maps up into different themes, with different layers, permissions and functionality.</p>"},{"location":"gui/versions/#add-a-new-version","title":"Add a new version","text":"<p>Select Create new version and fill in the details:</p> <ul> <li>Name</li> <li>Slug - the bit at the end of the URL. See slugs for more information</li> <li>Description (optional) - A friendly description that is shown to users and put in the metadata of the version</li> <li>Version Notes (optional) - A description for administrators about this version</li> <li>Theme - the theme you want your version to use</li> <li>Start extents - the bound to set the map to</li> <li>Enabled - sets whether the version is enabled or not</li> <li>Require login - choose whether you want the version to require a user to login to use it</li> <li>Welcome message (optional) - the welcome message you want your version to use</li> <li>Tour (optional) -  the tour you want your version to use</li> <li>Show login option - choose whether you want to show an option for users to login</li> <li>Show as a featured version - choose whether you want the version to be featured at the top of the version home page. Leaving this unchecked will put the version with all other versions underneath</li> <li>Hide from version home page - choose if you want to hide the version on the version home page (if you hide a version, it can still be accessed directly by its URL)</li> <li>Help URL (optional) - include a link to custom documentation</li> <li>Feedback URL (optional) - include a link to a feedback form</li> <li>Redirection URL (optional) - a URL to redirect the user to instead of loading the version. Can be useful if a version changes slug, or you want to point people elsewhere</li> <li>Version image URL (optional) - include a URL to an image to use on the version home page. Leaving this blank will use a default image of the world instead. We recommend image sizes of 400px by 200px for a neat and consistent look.</li> <li>Purge cache - ticking this box will purge the cache and allow your version to be available for testing or use straight away</li> </ul> <p>On the right side of the screen, you'll see options for:</p> <ul> <li>Basemaps - choose which basemaps you want to include in your version and which one you want to set as the default</li> <li>Projections - choose which projections are available and what the default map and viewing projection is</li> <li>Categories - choose which layer categories you want to include in your version</li> </ul>"},{"location":"gui/versions/#edit-a-version","title":"Edit a version","text":"<p>Select the version you want to edit. Make the changes you want and hit Save.</p> <p>On the right side of the screen you will also see new options for:</p> <ul> <li>Layer customisations - allows you to customise how individual layers are configured for this specific version only</li> <li>Version contacts - add users who are considered a 'contact' for the version</li> </ul>"},{"location":"gui/versions/#delete-a-version","title":"Delete a version","text":"<p>Select the version you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"},{"location":"gui/versions/#slugs","title":"Slugs","text":"<p>Slugs are the bit on the end of your application URL which direct you to different versions of GIFramework Maps. You can have a maximum of three slugs seperated by forward slashes. </p> <p>By default, there should be one called 'general' which is where you will be directed if you have no slug on your URL.</p> <p>Reserved slugs</p> <p>There are a number of slugs that are reserved for use by the GIFramework Maps application. Using these will not work and may cause other unintended consequences. </p> <ul> <li><code>general</code></li> <li><code>account</code></li> <li><code>api</code></li> <li><code>print</code></li> <li><code>search</code></li> <li><code>broadcasthub</code></li> <li><code>css</code></li> <li><code>img</code></li> <li><code>lib</code></li> </ul> <p>You should not use these as the first part of the slug, regardless of any additional parts you put on the end, e.g. <code>lib/myversion</code> is not valid</p> <p>Examples</p> <p>'general' -&gt; Root of application e.g. <code>https://&lt;your-application-root&gt;/</code></p> <p>'highways' -&gt; <code>https://&lt;your-application-root&gt;/highways</code></p> <p>'very/long/slug' -&gt; <code>https://&lt;your-application-root&gt;/very/long/slug</code></p>"},{"location":"gui/versions/#layer-customisations","title":"Layer customisations","text":"<p>Layer customisations allow you to customise how individual layers are configured for this specific version only. The most common use is to turn one or many layers on by default, so users don't have to switch them on themselves, but you can also set the starting opacity/saturation, set the zoom levels and change where it appears within its category.</p> <p>You will be shown a list of all layers that are currently enabled in your version. Any that already have customisation will be at the top and highlighted.</p> <p> </p> The layer customisations table for a version <p>Choose a layer you want to customise and you'll be taken to the customisations screen. You can set the following options on the layer: - On by default - Check to make this layer be switched on by default when the user opens this version - Minimum viewable zoom level - Set the minimum viewable zoom level. Zooming out beyond this level will switch the layer off automatically - Maximum viewable zoom level - Set the maximum viewable zoom level. Zooming in beyond this level will switch the layer off automatically - Sort order within category - Change the position it appears sorted in within its folder - Default opacity - Set the default opacity of the layer - Default saturation - Set the default saturation of the layer</p> <p>Note</p> <p>Setting 'On by default' on a layer will override a users share link and always turn on the layer, so use with caution</p> <p>If you are editing an existing customisation, you can also delete the customisation using the Delete button.</p> <p>Every layer customisation applied to a version can be removed in one go by going to the Layer Customisations list and choosing 'Remove all custonisations'.</p>"},{"location":"gui/versions/#version-contacts","title":"Version contacts","text":"<p>Version contacts allow you to add one or many users as 'contacts' for the version. This could be for any reason, such as being the named person in charge of the version, or an interested party. Administrators can then use this list to quickly get in touch with relevant people for a version.</p> <p>Go the edit screen of a version, and choose the 'Version contacts' button on the right. You will be shown a list of any existing contacts and a button to add a contact entry.</p>"},{"location":"gui/versions/#adding-or-editing-a-contact","title":"Adding or editing a contact","text":"<p>You can add a contact using the list of users for the application, or by entering their name and email address manually. Use the list of users where possible to make sure their name/email address stays up to date.</p> <p>Note</p> <p>It is your responsibility to make sure the user is happy to be contacted regarding this version. Do not add people who are unaware of this, and remove contacts who are no longer needed</p> <p>You can check the 'Enable alerts for user' to make sure they are included in any emails or any future automated alert functionality.</p>"},{"location":"gui/versions/#emailing-users","title":"Emailing users","text":"<p>On the version contacts list, there is a button to 'Draft an email'. This will simply open an email addressed to all users with 'Yes' in the Mailing List column in your default mail program.</p>"},{"location":"gui/welcome-messages/","title":"Welcome messages","text":"<p>The welcome message is a popup that can appear when you first load the map. Welcome messages are configurable per version.</p>"},{"location":"gui/welcome-messages/#add-a-new-welcome-message","title":"Add a new welcome message","text":"<p>Select Add new welcome message and fill in the details:</p> <ul> <li>Name</li> <li>Title - this will appear in bold at the top of your welcome message</li> <li>Content - add your message here and make sure to include HTML markup for paragraphs <code>&lt;p&gt;</code>, headers <code>&lt;h2&gt;</code> and links <code>&lt;a href ... &gt;</code></li> <li>How often you want the message to show</li> <li>Update date - a date when the message has been updated enough to reshow it to users</li> <li>Dismiss using button only - tick the checkbox if you want users to only be able to dismiss your message by using the dismiss button</li> <li>Dismiss button text - this defaults to Close if you leave it blank</li> <li>How big you want your welcome message to appear - choose from either a pop-up window or a full screen message</li> </ul> <p>Hint</p> <p>Ticking the dismiss using button only box and choosing an update frequency of Just once or Always, with custom dismiss button text and a size of full screen can work as a reasonable alternative to a standard 'Agree to our terms' screen. For user experience reasons, try not to do this too much if you don't need to</p>"},{"location":"gui/welcome-messages/#edit-a-welcome-message","title":"Edit a welcome message","text":"<p>Select the welcome message you want to edit. Make the changes you want and hit Save.</p>"},{"location":"gui/welcome-messages/#delete-a-welcome-message","title":"Delete a welcome message","text":"<p>Select the welcome message you want to delete. You will be asked if you're sure, press Delete again to confirm.</p>"}]}